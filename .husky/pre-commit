#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run typecheck before lint-staged to catch TypeScript errors early
echo "üîç Running TypeScript typecheck..."
echo "   This ensures no type errors make it into the repository."
echo ""

# Use turbo's typecheck which is faster and respects dependencies
npm run typecheck || {
  echo ""
  echo "‚ùå TypeScript errors found!"
  echo "   Please fix the errors above before committing."
  echo "   Run 'npm run typecheck' locally to see detailed errors."
  exit 1
}

echo "‚úÖ Typecheck passed!"
echo ""

# Run lint-staged for formatting and linting
npx lint-staged
