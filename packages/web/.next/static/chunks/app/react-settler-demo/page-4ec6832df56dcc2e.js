(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{6583:function(e,t,r){Promise.resolve().then(r.bind(r,1455))},3594:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationError=t.CompilationError=t.SecurityError=t.ValidationError=t.ReconciliationError=void 0;class r extends Error{constructor(e,t,r,n){super(e),this.name="ReconciliationError",this.code=t,this.statusCode=r,this.details=n,this.timestamp=new Date().toISOString(),Error.captureStackTrace(this,this.constructor)}}t.ReconciliationError=r;class n extends r{constructor(e,t,r,n){super(e,"VALIDATION_ERROR",400,n),this.name="ValidationError",this.field=t,this.value=r}}t.ValidationError=n;class i extends r{constructor(e,t){super(e,"SECURITY_ERROR",403,t),this.name="SecurityError"}}t.SecurityError=i;class o extends r{constructor(e,t,r,n,i){super(e,"COMPILATION_ERROR",500,i),this.name="CompilationError",this.component=t,this.line=r,this.column=n}}t.CompilationError=o;class a extends r{constructor(e,t,r){super(e,"CONFIGURATION_ERROR",500,r),this.name="ConfigurationError",this.configPath=t}}t.ConfigurationError=a},2087:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=t.generateSecureId=t.maskPII=t.validateTransactionId=t.sanitizeTransactionMetadata=t.formatMoney=t.isValidMoney=t.isValidCurrency=t.isValidISODate=t.sanitizeString=t.ConfigurationError=t.CompilationError=t.SecurityError=t.ProtocolValidationError=t.ReconciliationError=void 0;var n=r(3594);Object.defineProperty(t,"ReconciliationError",{enumerable:!0,get:function(){return n.ReconciliationError}}),Object.defineProperty(t,"ProtocolValidationError",{enumerable:!0,get:function(){return n.ValidationError}}),Object.defineProperty(t,"SecurityError",{enumerable:!0,get:function(){return n.SecurityError}}),Object.defineProperty(t,"CompilationError",{enumerable:!0,get:function(){return n.CompilationError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return n.ConfigurationError}});var i=r(9183);Object.defineProperty(t,"sanitizeString",{enumerable:!0,get:function(){return i.sanitizeString}}),Object.defineProperty(t,"isValidISODate",{enumerable:!0,get:function(){return i.isValidISODate}}),Object.defineProperty(t,"isValidCurrency",{enumerable:!0,get:function(){return i.isValidCurrency}}),Object.defineProperty(t,"isValidMoney",{enumerable:!0,get:function(){return i.isValidMoney}}),Object.defineProperty(t,"formatMoney",{enumerable:!0,get:function(){return i.formatMoney}}),Object.defineProperty(t,"sanitizeTransactionMetadata",{enumerable:!0,get:function(){return i.sanitizeTransactionMetadata}}),Object.defineProperty(t,"validateTransactionId",{enumerable:!0,get:function(){return i.validateTransactionId}}),Object.defineProperty(t,"maskPII",{enumerable:!0,get:function(){return i.maskPII}}),Object.defineProperty(t,"generateSecureId",{enumerable:!0,get:function(){return i.generateSecureId}}),Object.defineProperty(t,"deepClone",{enumerable:!0,get:function(){return i.deepClone}})},9183:function(e,t){"use strict";function r(e){return"string"!=typeof e?"":e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}function n(e){return!!e&&"string"==typeof e&&/^[A-Z]{3}$/.test(e)}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.value||isNaN(e.value)||!isFinite(e.value))&&!(e.value<0)&&n(e.currency)}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeString=r,t.isValidISODate=function(e){if(!e||"string"!=typeof e)return!1;let t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e},t.isValidCurrency=n,t.isValidMoney=i,t.formatMoney=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if(!i(e))return"Invalid";try{return new Intl.NumberFormat(t,{style:"currency",currency:e.currency}).format(e.value)}catch(t){return"".concat(e.currency," ").concat(e.value.toFixed(2))}},t.sanitizeTransactionMetadata=function(e){if(!e||"object"!=typeof e)return;let t={};for(let[n,i]of Object.entries(e)){let e=r(n);e&&("string"==typeof i?t[e]=r(i):"number"==typeof i||"boolean"==typeof i?t[e]=i:null===i&&(t[e]=null))}return t},t.validateTransactionId=function(e){return!!e&&"string"==typeof e&&e.length>0&&e.length<=255&&/^[a-zA-Z0-9_-]+$/.test(e)},t.maskPII=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";return e&&"string"==typeof e?e=(e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,e=>{let[r,n]=e.split("@");return r&&n?"".concat(r[0]).concat(t.repeat(Math.max(0,r.length-2)),"@").concat(n):e})).replace(/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,e=>"****-****-****-".concat(e.slice(-4))):""},t.generateSecureId=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",t=new Uint8Array(16);if("undefined"!=typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=Math.floor(256*Math.random());let r=Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("");return"".concat(e,"_").concat(r)},t.deepClone=function e(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array)return t.map(t=>e(t));if("object"==typeof t){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n]));return r}return t}},6268:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactSettlerMCPServer=void 0,t.createMCPServer=function(e){return new i(e)};let n=r(9410);class i{registerWorkflow(e,t){this.workflows.set(e,t)}getServerInfo(){return this.config}listResources(){let e=[];return this.workflows.forEach((t,r)=>{var n;e.push({uri:"settler://workflow/".concat(r),name:t.metadata.name,description:null!==(n=t.metadata.description)&&void 0!==n?n:void 0,mimeType:"application/json"})}),e}getResource(e){let t=e.match(/^settler:\/\/workflow\/(.+)$/);if(!t||!t[1])return null;let r=t[1];return this.workflows.get(r)||null}listTools(){return[{name:"compile_reconciliation_workflow",description:"Compile a React.Settler workflow to JSON configuration",inputSchema:{type:"object",properties:{workflowId:{type:"string",description:"ID of the workflow to compile"}},required:["workflowId"]}},{name:"validate_transaction",description:"Validate a reconciliation transaction",inputSchema:{type:"object",properties:{transaction:{type:"object",description:"Transaction object to validate"}},required:["transaction"]}},{name:"create_reconciliation_workflow",description:"Create a new reconciliation workflow configuration",inputSchema:{type:"object",properties:{name:{type:"string"},description:{type:"string"},rulesets:{type:"array"}},required:["name"]}}]}async callTool(e,t){switch(e){case"compile_reconciliation_workflow":return this.compileWorkflow(t.workflowId);case"validate_transaction":return this.validateTransaction(t.transaction);case"create_reconciliation_workflow":return this.createWorkflow(t);default:throw Error("Unknown tool: ".concat(e))}}compileWorkflow(e){let t=this.workflows.get(e);if(!t)throw Error("Workflow not found: ".concat(e));return t}validateTransaction(e){let t=[];return e.id||t.push("Transaction ID is required"),e.amount&&"number"==typeof e.amount.value||t.push("Valid amount is required"),e.currency||t.push("Currency is required"),{valid:0===t.length,errors:t}}createWorkflow(e){return{version:"1.0.0",metadata:{name:e.name,description:e.description,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},rulesets:e.rulesets||[],views:[],widgets:{}}}constructor(e){this.workflows=new Map,(0,n.requireFeature)(n.FEATURE_FLAGS.MCP_INTEGRATION,"MCP Server Integration"),this.config=e}}t.ReactSettlerMCPServer=i},4905:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ShopifyApp=function(e){let{shop:t,transactions:r=[],exceptions:n=[],onAction:a}=e,{hasAccess:u,UpgradePrompt:p}=(0,o.useFeatureGate)(o.FEATURE_FLAGS.SHOPIFY_INTEGRATION);return u?(0,i.jsx)("div",{style:{padding:"1rem",maxWidth:"100%",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},"data-shopify-app":!0,"data-shop":t,children:(0,i.jsxs)(s.ReconciliationDashboard,{children:[(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.5rem"},children:"Payment Reconciliation"}),(0,i.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Shop: ",t]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,i.jsx)(d.MetricCard,{title:"Total Transactions",value:r.length,subtitle:"This period"}),(0,i.jsx)(d.MetricCard,{title:"Match Rate",value:"".concat(Math.round((r.length-n.length)/Math.max(r.length,1)*100),"%"),subtitle:"Successfully matched",trend:"up"}),(0,i.jsx)(d.MetricCard,{title:"Exceptions",value:n.length,subtitle:"Requiring review",trend:n.length>0?"down":"neutral"})]}),r.length>0&&(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.75rem"},children:"Transactions"}),(0,i.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,i.jsx)(l.TransactionTable,{transactions:r,onSelect:e=>null==a?void 0:a("transaction.selected",e)})})]}),n.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.75rem"},children:"Exceptions"}),(0,i.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,i.jsx)(c.ExceptionTable,{exceptions:n,onResolve:e=>null==a?void 0:a("exception.resolved",e)})})]})]})}):(0,i.jsx)(p,{})},t.useShopifyAppBridge=function(){let[e,t]=a.default.useState(""),[r,n]=a.default.useState("");return a.default.useEffect(()=>{if(window.ShopifyAppBridge){var e;let r=window.ShopifyAppBridge;t((null===(e=r.getShopDomain)||void 0===e?void 0:e.call(r))||"")}},[]),{shop:e,apiKey:r,setApiKey:n}};let i=r(7573),o=r(9410),a=(n=r(7653))&&n.__esModule?n:{default:n},s=r(1774),l=r(7817),c=r(4238),d=r(6464)},1822:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StripeApp=function(e){let{accountId:t,transactions:r=[],exceptions:u=[],onExport:p}=e,{hasAccess:h}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.STRIPE_INTEGRATION);return h?(0,n.jsx)("div",{style:{padding:"1.5rem",backgroundColor:"#fafafa",minHeight:"100vh"},"data-stripe-app":!0,"data-account-id":t,children:(0,n.jsxs)(o.ReconciliationDashboard,{children:[(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.75rem",fontWeight:600},children:"Reconciliation Dashboard"}),r.length>0&&(0,n.jsx)(c.ExportButton,{data:r,format:"csv",onExport:p})]}),(0,n.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Stripe Account: ",t]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,n.jsx)(l.MetricCard,{title:"Total Revenue",value:"$".concat(r.reduce((e,t)=>e+t.amount.value,0).toFixed(2)),subtitle:"This period"}),(0,n.jsx)(l.MetricCard,{title:"Transactions",value:r.length,subtitle:"Processed"}),(0,n.jsx)(l.MetricCard,{title:"Match Rate",value:"".concat(Math.round((r.length-u.length)/Math.max(r.length,1)*100),"%"),subtitle:"Successfully matched",trend:"up"}),(0,n.jsx)(l.MetricCard,{title:"Exceptions",value:u.length,subtitle:"Requiring review",trend:u.length>0?"down":"neutral"})]}),r.length>0&&(0,n.jsx)("div",{style:{marginBottom:"2rem"},children:(0,n.jsx)(a.TransactionTable,{transactions:r})}),u.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)(s.ExceptionTable,{exceptions:u})})]})}):(0,n.jsx)(d.UpgradePrompt,{feature:i.FEATURE_FLAGS.STRIPE_INTEGRATION,featureName:"Stripe Integration"})};let n=r(7573),i=r(9410),o=r(1774),a=r(7817),s=r(4238),l=r(6464),c=r(8860),d=r(2977)},7615:function(e,t){"use strict";function r(e,t){var r,n,i,o;let a={version:"1.0.0",metadata:{name:(null==t?void 0:t.name)||"Reconciliation Workflow",...(null==t?void 0:t.description)?{description:t.description}:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},rulesets:[],views:[],widgets:{}};return{version:a.version||"1.0.0",metadata:{name:(null===(r=a.metadata)||void 0===r?void 0:r.name)||"Reconciliation Workflow",...(null===(n=a.metadata)||void 0===n?void 0:n.description)?{description:a.metadata.description}:{},createdAt:(null===(i=a.metadata)||void 0===i?void 0:i.createdAt)||new Date().toISOString(),updatedAt:(null===(o=a.metadata)||void 0===o?void 0:o.updatedAt)||new Date().toISOString()},rulesets:a.rulesets||[],views:a.views||[],widgets:a.widgets||{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileToConfig=r,t.compileToJSON=function(e,t){let n=r(e,t);return(null==t?void 0:t.pretty)?JSON.stringify(n,null,2):JSON.stringify(n)}},1271:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;let n=r(7573),i=r(7653);class o extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.props.telemetryProvider&&this.props.telemetryProvider.trackError({error:e,component:"ErrorBoundary",context:{componentStack:t.componentStack},timestamp:new Date().toISOString()})}render(){return this.state.hasError&&this.state.error?this.props.fallback?"function"==typeof this.props.fallback?this.props.fallback(this.state.error,this.state.errorInfo):this.props.fallback:(0,n.jsxs)("div",{style:{padding:"2rem",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff5f5"},children:[(0,n.jsx)("h2",{style:{color:"#c53030",marginTop:0},children:"Something went wrong"}),(0,n.jsx)("p",{style:{color:"#742a2a"},children:this.state.error.message||"An unexpected error occurred"}),!1]}):this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}}t.ErrorBoundary=o},4238:function(e,t,r){"use strict";var n,i=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},o=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionTable=void 0;let s=r(7573),l=a(r(7653)),c=r(2087),d=r(9107),u=r(5395);t.ExceptionTable=l.default.memo(function(e){let{exceptions:t,onResolve:r,className:n,showSeverity:i=!0,showCategory:o=!0}=e,a=(0,d.useCompilationContext)(),{track:p}=(0,u.useTelemetry)("ExceptionTable"),h=(0,l.useMemo)(()=>t.map(e=>({...e,description:(0,c.sanitizeString)(e.description)})),[t]);return("config"===a.mode&&(a.config.widgets||(a.config.widgets={}),a.config.widgets["exception-table"]={id:"exception-table",type:"exception-table",props:{showSeverity:i,showCategory:o}}),"ui"===a.mode)?(0,s.jsx)("div",{className:n,"data-widget":"exception-table",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),o&&(0,s.jsx)("th",{children:"Category"}),i&&(0,s.jsx)("th",{children:"Severity"}),(0,s.jsx)("th",{children:"Description"}),(0,s.jsx)("th",{children:"Status"}),r&&(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:h.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),o&&(0,s.jsx)("td",{children:e.category}),i&&(0,s.jsx)("td",{children:(0,s.jsx)("span",{"data-severity":e.severity,children:e.severity})}),(0,s.jsx)("td",{children:e.description}),(0,s.jsx)("td",{children:e.resolutionStatus}),r&&(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>{p("exception.resolved",{exceptionId:e.id}),r(e)},children:"Resolve"})})]},e.id))})]})}):null})},8860:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportButton=function(e){let{data:t,filename:r="reconciliation-export",format:d="csv",onExport:u,className:p,disabled:h=!1}=e,f=(0,o.useCompilationContext)(),{track:m}=(0,a.useTelemetry)("ExportButton"),{auditLog:g}=(0,s.useSecurity)(),b=(0,i.useCallback)(()=>{if(!h&&0!==t.length){m("export.started",{format:d,recordCount:t.length}),g("export.generated","Export ".concat(d),"success",{format:d,recordCount:t.length});try{"csv"===d?l(t,r):"json"===d?c(JSON.stringify(t,null,2),"".concat(r,".json"),"application/json"):"xlsx"===d&&(console.warn("XLSX export requires xlsx library. Falling back to CSV."),l(t,r)),null==u||u(d,t),m("export.completed",{format:d,recordCount:t.length})}catch(e){m("export.failed",{format:d,error:e instanceof Error?e.message:"Unknown error"}),g("export.generated","Export ".concat(d),"failure",{format:d,error:e instanceof Error?e.message:"Unknown"})}}},[t,r,d,u,h,m,g]);return"config"===f.mode?(f.config.widgets||(f.config.widgets={}),f.config.widgets["export-button"]={id:"export-button",type:"filter-bar",props:{format:d}},null):(0,n.jsxs)("button",{onClick:b,disabled:h||0===t.length,className:p,"data-widget":"export-button",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:h?"#f3f4f6":"white",cursor:h?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:["Export ",d.toUpperCase()]})};let n=r(7573),i=r(7653),o=r(9107),a=r(5395),s=r(4537);function l(e,t){if(0===e.length)return;let r=Object.keys(e[0]),n=e.map(e=>r.map(t=>{let r=e[t];if(null==r)return"";let n=String(r).replace(/"/g,'""');return'"'.concat(n,'"')}));c([r.map(e=>'"'.concat(e,'"')).join(","),...n.map(e=>e.join(","))].join("\n"),"".concat(t,".csv"),"text/csv")}function c(e,t,r){let n=new Blob([e],{type:r}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}},8244:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBar=function(e){var t,r,s,l,c,d;let{onFilterChange:u,className:p,showProviderFilter:h=!0,showStatusFilter:f=!0,showDateRangeFilter:m=!0,showAmountRangeFilter:g=!0}=e,b=(0,o.useCompilationContext)(),{track:y}=(0,a.useTelemetry)("FilterBar"),[v,x]=(0,i.useState)({}),w=(0,i.useCallback)(e=>{x(e),y("filter.changed",{filters:e}),null==u||u(e)},[u,y]);return"config"===b.mode?(b.config.widgets||(b.config.widgets={}),b.config.widgets["filter-bar"]={id:"filter-bar",type:"filter-bar",props:{showProviderFilter:h,showStatusFilter:f,showDateRangeFilter:m,showAmountRangeFilter:g}},null):(0,n.jsx)("div",{className:p,"data-widget":"filter-bar",children:(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[h&&(0,n.jsxs)("select",{value:(null===(t=v.provider)||void 0===t?void 0:t[0])||"",onChange:e=>{let t=e.target.value?[e.target.value]:void 0;w({...v,provider:null!=t?t:void 0})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"},children:[(0,n.jsx)("option",{value:"",children:"All Providers"}),(0,n.jsx)("option",{value:"stripe",children:"Stripe"}),(0,n.jsx)("option",{value:"paypal",children:"PayPal"}),(0,n.jsx)("option",{value:"square",children:"Square"})]}),f&&(0,n.jsxs)("select",{value:(null===(r=v.status)||void 0===r?void 0:r[0])||"",onChange:e=>{let t=e.target.value?[e.target.value]:void 0;w({...v,status:null!=t?t:void 0})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"},children:[(0,n.jsx)("option",{value:"",children:"All Statuses"}),(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"succeeded",children:"Succeeded"}),(0,n.jsx)("option",{value:"failed",children:"Failed"})]}),m&&(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{type:"date",value:(null===(s=v.dateRange)||void 0===s?void 0:s.start)||"",onChange:e=>{w({...v,dateRange:{...v.dateRange,start:e.target.value}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"}}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"date",value:(null===(l=v.dateRange)||void 0===l?void 0:l.end)||"",onChange:e=>{w({...v,dateRange:{...v.dateRange,end:e.target.value}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"}})]}),g&&(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{type:"number",placeholder:"Min",value:(null===(c=v.amountRange)||void 0===c?void 0:c.min)||"",onChange:e=>{let t=e.target.value?parseFloat(e.target.value):void 0;w({...v,amountRange:{...v.amountRange,min:null!=t?t:void 0}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"number",placeholder:"Max",value:(null===(d=v.amountRange)||void 0===d?void 0:d.max)||"",onChange:e=>{let t=e.target.value?parseFloat(e.target.value):void 0;w({...v,amountRange:{...v.amountRange,max:null!=t?t:void 0}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}})]}),(0,n.jsx)("button",{onClick:()=>{w({}),y("filter.cleared")},style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer"},children:"Clear Filters"})]})})};let n=r(7573),i=r(7653),o=r(9107),a=r(5395)},198:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatchRule=function(e){let{id:t,name:r,field:o,type:a,tolerance:s,priority:l,enabled:c=!0}=e,d=(0,i.useCompilationContext)();if("config"===d.mode){d.config.rulesets&&0!==d.config.rulesets.length||(d.config.rulesets=[{id:"default-ruleset",name:"Default Rules",rules:[],priority:"exact-first"}]);let e=d.config.rulesets[d.config.rulesets.length-1];if(!e)return null;let n={id:t,name:r,field:o,type:a,...s?{tolerance:s}:{},...void 0!==l?{priority:l}:{},enabled:c};e.rules.push(n)}return"ui"===d.mode?(0,n.jsxs)("div",{"data-rule-id":t,"data-rule-field":o,"data-rule-type":a,children:[(0,n.jsx)("strong",{children:r}),(0,n.jsxs)("span",{children:["Field: ",o]}),(0,n.jsxs)("span",{children:["Type: ",a]}),s&&(0,n.jsxs)("span",{children:["Tolerance: ",JSON.stringify(s)]})]}):null};let n=r(7573),i=r(9107)},6464:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricCard=function(e){let{title:t,value:r,subtitle:o,trend:a,className:s}=e,l=(0,i.useCompilationContext)();if("config"===l.mode){let e="metric-".concat(t.toLowerCase().replace(/\s+/g,"-"));l.config.widgets||(l.config.widgets={}),l.config.widgets[e]={id:e,type:"metric-card",title:t,props:{subtitle:o,trend:a}}}return"ui"===l.mode?(0,n.jsx)("div",{className:s,"data-widget":"metric-card",children:(0,n.jsxs)("div",{"data-metric-title":t,children:[(0,n.jsx)("h3",{children:t}),(0,n.jsx)("div",{"data-metric-value":r,"data-trend":a,children:r}),o&&(0,n.jsx)("div",{"data-metric-subtitle":!0,children:o})]})}):null};let n=r(7573),i=r(9107)},2553:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileDashboard=function(e){let{transactions:t,exceptions:r,onTransactionSelect:u,onExceptionResolve:p,className:h}=e,{track:f}=(0,d.useTelemetry)("MobileDashboard"),[m,g]=(0,i.useState)("transactions"),[b,y]=(0,i.useState)(""),v=(0,i.useMemo)(()=>{if(!b)return t;let e=b.toLowerCase();return t.filter(t=>t.id.toLowerCase().includes(e)||t.provider.toLowerCase().includes(e)||t.providerTransactionId.toLowerCase().includes(e))},[t,b]);return(0,n.jsx)(o.ReconciliationDashboard,{...void 0!==h?{className:h}:{},children:(0,n.jsxs)("div",{style:{padding:"1rem",maxWidth:"100%",backgroundColor:"#fff"},"data-mobile-dashboard":!0,children:[(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem",color:"#111827"},children:"Reconciliation"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.75rem",overflowX:"auto",paddingBottom:"0.5rem",WebkitOverflowScrolling:"touch"},children:[(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Transactions",value:t.length,subtitle:"Total"})}),(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Match Rate",value:"".concat(Math.round((t.length-r.length)/Math.max(t.length,1)*100),"%"),subtitle:"Success"})}),(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Exceptions",value:r.length,subtitle:"Review"})})]})]}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsx)(c.SearchBar,{onSearch:e=>{y(e),f("search.executed",{query:e,platform:"mobile"})},placeholder:"Search transactions...",debounceMs:300})}),(0,n.jsxs)("div",{style:{display:"flex",borderBottom:"2px solid #e5e7eb",marginBottom:"1rem"},role:"tablist","aria-label":"Dashboard tabs",children:[(0,n.jsxs)("button",{onClick:()=>{g("transactions"),f("tab.switched",{tab:"transactions"})},role:"tab","aria-selected":"transactions"===m,"aria-controls":"transactions-panel",style:{flex:1,padding:"0.75rem",border:"none",backgroundColor:"transparent",borderBottom:"transactions"===m?"2px solid #3b82f6":"none",color:"transactions"===m?"#3b82f6":"#6b7280",fontWeight:"transactions"===m?600:400,fontSize:"0.875rem",cursor:"pointer",touchAction:"manipulation"},children:["Transactions (",t.length,")"]}),(0,n.jsxs)("button",{onClick:()=>{g("exceptions"),f("tab.switched",{tab:"exceptions"})},role:"tab","aria-selected":"exceptions"===m,"aria-controls":"exceptions-panel",style:{flex:1,padding:"0.75rem",border:"none",backgroundColor:"transparent",borderBottom:"exceptions"===m?"2px solid #3b82f6":"none",color:"exceptions"===m?"#3b82f6":"#6b7280",fontWeight:"exceptions"===m?600:400,fontSize:"0.875rem",cursor:"pointer",touchAction:"manipulation"},children:["Exceptions (",r.length,")"]})]}),(0,n.jsx)("div",{role:"tabpanel",id:"transactions-panel","aria-hidden":"transactions"!==m,style:{display:"transactions"===m?"block":"none"},children:v.length>0?(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(a.TransactionTable,{transactions:v,...void 0!==u?{onSelect:u}:{}})}):(0,n.jsx)("div",{style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:(0,n.jsx)("p",{children:"No transactions found"})})}),(0,n.jsx)("div",{role:"tabpanel",id:"exceptions-panel","aria-hidden":"exceptions"!==m,style:{display:"exceptions"===m?"block":"none"},children:r.length>0?(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(s.ExceptionTable,{exceptions:r,...void 0!==p?{onResolve:p}:{}})}):(0,n.jsx)("div",{style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:(0,n.jsx)("p",{children:"No exceptions found"})})})]})})};let n=r(7573),i=r(7653),o=r(1774),a=r(7817),s=r(4238),l=r(6464),c=r(3166),d=r(5395)},1774:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReconciliationDashboard=function(e){let{children:t,mode:r,config:o,className:a}=e;return(0,n.jsx)(i.CompilationProvider,{...void 0!==r?{mode:r}:{},...void 0!==o?{config:o}:{},children:(0,n.jsx)("div",{className:a,"data-reconciliation-dashboard":!0,children:t})})};let n=r(7573),i=r(9107)},201:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=function(e){let{id:t,name:r,priority:o="exact-first",conflictResolution:a="manual-review",children:s}=e,l=(0,i.useCompilationContext)();return"config"===l.mode&&(l.config.rulesets||(l.config.rulesets=[]),l.config.rulesets.push({id:t,name:r,rules:[],priority:o,conflictResolution:a})),(0,n.jsx)(n.Fragment,{children:s})};let n=r(7573),i=r(9107)},3166:function(e,t,r){"use strict";var n,i=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},o=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBar=function(e){let{onSearch:t,placeholder:r="Search transactions...",className:n,debounceMs:i=300,searchFields:o=["id","providerTransactionId","referenceId"]}=e,a=(0,c.useCompilationContext)(),{track:u}=(0,d.useTelemetry)("SearchBar"),[p,h]=(0,l.useState)(""),[f,m]=(0,l.useState)("");l.default.useEffect(()=>{let e=setTimeout(()=>{m(p)},i);return()=>clearTimeout(e)},[p,i]),l.default.useEffect(()=>{f!==p&&(u("search.executed",{query:f,length:f.length}),null==t||t(f))},[f,t,u]);let g=(0,l.useCallback)(e=>{let t=e.target.value;h(t),u("search.changed",{query:t})},[u]),b=(0,l.useCallback)(()=>{h(""),m(""),u("search.cleared"),null==t||t("")},[t,u]);return"config"===a.mode?(a.config.widgets||(a.config.widgets={}),a.config.widgets["search-bar"]={id:"search-bar",type:"filter-bar",props:{placeholder:r,debounceMs:i,searchFields:o}},null):(0,s.jsxs)("div",{className:n,"data-widget":"search-bar",style:{position:"relative"},children:[(0,s.jsx)("input",{type:"text",value:p,onChange:g,placeholder:r,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"1rem"}}),p&&(0,s.jsx)("button",{onClick:b,style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem",color:"#6b7280"},"aria-label":"Clear search",children:"\xd7"})]})};let s=r(7573),l=a(r(7653)),c=r(9107),d=r(5395)},7817:function(e,t,r){"use strict";var n,i=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},o=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionTable=void 0;let s=r(7573),l=a(r(7653)),c=r(9107),d=r(5395),u=r(2087);t.TransactionTable=l.default.memo(function(e){let{transactions:t,onSelect:r,className:n,showProvider:i=!0,showStatus:o=!0}=e,a=(0,c.useCompilationContext)(),{track:p}=(0,d.useTelemetry)("TransactionTable"),h=(0,l.useMemo)(()=>t.map(e=>({...e,id:(0,u.sanitizeString)(e.id),provider:(0,u.sanitizeString)(e.provider),providerTransactionId:(0,u.sanitizeString)(e.providerTransactionId),...e.referenceId?{referenceId:(0,u.sanitizeString)(e.referenceId)}:{}})),[t]);return("config"===a.mode&&(a.config.widgets||(a.config.widgets={}),a.config.widgets["transaction-table"]={id:"transaction-table",type:"transaction-table",props:{showProvider:i,showStatus:o}}),"ui"===a.mode)?(0,s.jsxs)("div",{className:n,"data-widget":"transaction-table",children:[(0,s.jsx)("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:(0,s.jsxs)("table",{role:"table","aria-label":"Reconciliation transactions",style:{width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"ID"}),i&&(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Provider"}),(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Amount"}),(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Currency"}),(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Date"}),o&&(0,s.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Status"})]})}),(0,s.jsx)("tbody",{children:h.map((e,t)=>(0,s.jsxs)("tr",{onClick:()=>{p("transaction.selected",{transactionId:e.id}),null==r||r(e)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),p("transaction.selected",{transactionId:e.id}),null==r||r(e))},role:r?"button":"row",tabIndex:r?0:-1,"aria-label":"Transaction ".concat(e.id,", ").concat(e.amount.value," ").concat(e.amount.currency),style:{cursor:r?"pointer":"default",backgroundColor:t%2==0?"white":"#f9fafb",borderBottom:"1px solid #e5e7eb",transition:"background-color 0.15s ease"},onMouseEnter:e=>{r&&(e.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=t%2==0?"white":"#f9fafb"},onFocus:e=>{r&&(e.currentTarget.style.outline="2px solid #3b82f6",e.currentTarget.style.outlineOffset="-2px")},onBlur:e=>{e.currentTarget.style.outline="none"},children:[(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.id}),i&&(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.provider}),(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.amount.value.toFixed(2)}),(0,s.jsx)("td",{style:{padding:"0.75rem"},children:e.currency}),(0,s.jsx)("td",{style:{padding:"0.75rem"},children:(0,s.jsx)("time",{dateTime:e.date,children:new Date(e.date).toLocaleDateString()})}),o&&(0,s.jsx)("td",{style:{padding:"0.75rem"},children:(0,s.jsx)("span",{role:"status","aria-label":"Status: ".concat(e.status),children:e.status})})]},e.id))})]})}),0===h.length&&(0,s.jsx)("div",{role:"status","aria-live":"polite",style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:"No transactions found"})]}):null})},2977:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradePrompt=function(e){let{feature:t,featureName:r,compact:o=!1,onUpgrade:a}=e,s=()=>{a?a():window.open("https://settler.dev/pricing","_blank","noopener,noreferrer")};return o?(0,n.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,n.jsxs)("span",{style:{color:"#92400e"},children:[r||t," requires Settler Commercial."," "]}),(0,n.jsx)("button",{onClick:s,style:{backgroundColor:"transparent",border:"none",color:"#92400e",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Upgrade â†’"})]}):(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",border:"2px dashed #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,n.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDD12"}),(0,n.jsxs)("h3",{style:{marginTop:0,marginBottom:"0.5rem",color:"#111827"},children:[r||t," is a Commercial Feature"]}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem",maxWidth:"500px",margin:"0 auto 1.5rem"},children:(0,i.getUpgradeMessage)(t)}),(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,n.jsx)("button",{onClick:s,style:{padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontWeight:600,cursor:"pointer",fontSize:"1rem"},children:"View Pricing"}),(0,n.jsx)("a",{href:"https://settler.dev/docs/commercial-features",target:"_blank",rel:"noopener noreferrer",style:{padding:"0.75rem 1.5rem",backgroundColor:"white",color:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",textDecoration:"none",fontWeight:600,fontSize:"1rem"},children:"Learn More"})]})]})};let n=r(7573),i=r(9410)},9372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualizedTable=function(e){let{transactions:t,height:r=400,rowHeight:s=50,onSelect:l,className:c}=e,d=(0,a.useCompilationContext)(),{hasAccess:u,UpgradePrompt:p}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.VIRTUALIZATION),[h,f]=(0,o.useState)(0);if(!u)return(0,n.jsx)(p,{});let m=(0,o.useMemo)(()=>{let e=Math.floor(h/s),n=Math.min(e+Math.ceil(r/s)+1,t.length);return{startIndex:e,endIndex:n}},[h,s,r,t.length]),g=(0,o.useMemo)(()=>t.slice(m.startIndex,m.endIndex),[t,m]),b=t.length*s,y=m.startIndex*s,v=(0,o.useCallback)(e=>{f(e.currentTarget.scrollTop)},[]);return"config"===d.mode?(d.config.widgets||(d.config.widgets={}),d.config.widgets["virtualized-table"]={id:"virtualized-table",type:"transaction-table",props:{height:r,rowHeight:s}},null):(0,n.jsx)("div",{className:c,"data-widget":"virtualized-table",style:{height:r,overflow:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},onScroll:v,children:(0,n.jsx)("div",{style:{height:b,position:"relative"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{position:"sticky",top:0,backgroundColor:"#f9fafb",zIndex:10},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"ID"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Provider"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Amount"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Date"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Status"})]})}),(0,n.jsx)("tbody",{style:{transform:"translateY(".concat(y,"px)")},children:g.map((e,t)=>(0,n.jsxs)("tr",{onClick:()=>null==l?void 0:l(e),style:{cursor:l?"pointer":"default",backgroundColor:t%2==0?"white":"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.id}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.provider}),(0,n.jsxs)("td",{style:{padding:"0.75rem"},children:[e.amount.value.toFixed(2)," ",e.amount.currency]}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.date).toLocaleDateString()}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.status})]},e.id))})]})})})};let n=r(7573),i=r(9410),o=r(7653),a=r(9107)},9107:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationProvider=function(e){let{mode:t="ui",config:r={},children:i}=e,a={mode:t,config:r,widgetRegistry:new Map};return(0,n.jsx)(o.Provider,{value:a,children:i})},t.useCompilationContext=function(){return(0,i.useContext)(o)||{mode:"ui",config:{},widgetRegistry:new Map}};let n=r(7573),i=r(7653),o=(0,i.createContext)(null)},4537:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAuditLogHandler=function(e){a=e},t.useSecurity=function(){let e=(0,o.useCompilationContext)().securityContext,t=(0,i.useCallback)((t,r,i,o)=>{if(!(0,n.hasFeature)(n.FEATURE_FLAGS.AUDIT_LOGGING)){console.warn("Audit logging requires Settler Commercial subscription");return}if(!a)return;let s={id:"audit_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),event:t,...(null==e?void 0:e.userId)?{userId:e.userId}:{},...(null==e?void 0:e.sessionId)?{sessionId:e.sessionId}:{},...(null==e?void 0:e.ipAddress)?{ipAddress:e.ipAddress}:{},...(null==e?void 0:e.userAgent)?{userAgent:e.userAgent}:{},action:r,result:i,...o?{metadata:o}:{}};a(s)},[e]),r=(0,i.useCallback)(t=>null!=e&&!!e.permissions&&e.permissions.includes(t),[e]),s=(0,i.useCallback)(t=>null!=e&&!!e.roles&&e.roles.includes(t),[e]);return{securityContext:e,auditLog:t,hasPermission:r,hasRole:s}};let n=r(9410),i=r(7653),o=r(9107),a=null},5395:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTelemetryProvider=function(e){o=e},t.setTelemetryConfig=function(e){a={...a,...e}},t.useTelemetry=function(e){(0,n.requireFeature)(n.FEATURE_FLAGS.TELEMETRY,"Telemetry");let t=(0,i.useRef)(Date.now()),r=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(a.enabled&&a.trackPerformance)return t.current=Date.now(),()=>{let r=Date.now()-t.current;e&&r>0&&d({renderTime:r},e)}},[e]);let l=(0,i.useCallback)((t,r)=>{if(!a.enabled||!o||Math.random()>(a.sampleRate||1))return;let n={id:"evt_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),type:"component.interaction",name:t,...r?{properties:a.scrubPII?s(r):r}:{},...e?{context:{component:e}}:{}};o.track(n)},[e]),c=(0,i.useCallback)((t,r)=>{if(!a.enabled||!a.trackErrors||!o)return;let n={error:t,...e?{component:e}:{},...r?{context:a.scrubPII?s(r):r}:{},timestamp:new Date().toISOString()};o.trackError(n)},[e]),d=(0,i.useCallback)((t,r)=>{if(!a.enabled||!a.trackPerformance||!o)return;let n={id:"perf_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),timestamp:new Date().toISOString(),type:"performance",name:"component.performance",measurements:t,...r||e?{context:{component:r||e}}:{}};o.track(n)},[e]),u=(0,i.useCallback)(()=>{r.current=Date.now()},[]),p=(0,i.useCallback)(t=>{if(null===r.current)return;let n=Date.now()-r.current;d({interactionLatency:n},e),l(t,{latency:n}),r.current=null},[e,l,d]);return{track:l,trackError:c,trackPerformance:d,startInteraction:u,endInteraction:p}};let n=r(9410),i=r(7653),o=null,a={enabled:!1,sampleRate:1,batchSize:10,flushInterval:5e3,trackPerformance:!0,trackErrors:!0,trackUsers:!1,scrubPII:!0};function s(e){if(!e)return;let t={},r=[/email/i,/phone/i,/ssn/i,/credit.?card/i,/card.?number/i,/cvv/i,/password/i,/token/i,/api.?key/i];for(let[n,i]of Object.entries(e))r.some(e=>e.test(n))&&"string"==typeof i?t[n]="[REDACTED]":t[n]=i;return t}},7441:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useValidation=function(e){return{validateTransaction:(0,n.useMemo)(()=>t=>{var r,n,o,a,s;let l=[];if((0,i.validateTransactionId)(t.id)||l.push({field:"id",code:"INVALID_ID",message:"Transaction ID is invalid"}),t.provider&&"string"==typeof t.provider?(null==e?void 0:null===(r=e.transaction)||void 0===r?void 0:r.allowedProviders)&&!e.transaction.allowedProviders.includes(t.provider)&&l.push({field:"provider",code:"INVALID_PROVIDER",message:"Provider must be one of: ".concat(e.transaction.allowedProviders.join(", "))}):l.push({field:"provider",code:"REQUIRED_FIELD",message:"Provider is required"}),(0,i.isValidMoney)(t.amount)?((null==e?void 0:null===(a=e.transaction)||void 0===a?void 0:a.maxAmount)&&t.amount.value>e.transaction.maxAmount&&l.push({field:"amount",code:"AMOUNT_TOO_LARGE",message:"Amount exceeds maximum of ".concat(e.transaction.maxAmount)}),(null==e?void 0:null===(s=e.transaction)||void 0===s?void 0:s.minAmount)&&t.amount.value<e.transaction.minAmount&&l.push({field:"amount",code:"AMOUNT_TOO_SMALL",message:"Amount is below minimum of ".concat(e.transaction.minAmount)})):l.push({field:"amount",code:"INVALID_AMOUNT",message:"Amount is invalid"}),(0,i.isValidCurrency)(t.currency)?(null==e?void 0:null===(n=e.transaction)||void 0===n?void 0:n.allowedCurrencies)&&!e.transaction.allowedCurrencies.includes(t.currency)&&l.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be one of: ".concat(e.transaction.allowedCurrencies.join(", "))}):l.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be a valid ISO 4217 code"}),(0,i.isValidISODate)(t.date)){if(null==e?void 0:null===(o=e.transaction)||void 0===o?void 0:o.dateRange){let r=new Date(t.date);e.transaction.dateRange.min&&r<new Date(e.transaction.dateRange.min)&&l.push({field:"date",code:"DATE_TOO_EARLY",message:"Date is before minimum allowed date"}),e.transaction.dateRange.max&&r>new Date(e.transaction.dateRange.max)&&l.push({field:"date",code:"DATE_TOO_LATE",message:"Date is after maximum allowed date"})}}else l.push({field:"date",code:"INVALID_DATE",message:"Date must be a valid ISO 8601 date string"});let c=["pending","succeeded","failed","refunded","disputed"];return c.includes(t.status)||l.push({field:"status",code:"INVALID_STATUS",message:"Status must be one of: ".concat(c.join(", "))}),t.metadata&&t.metadata,{valid:0===l.length,errors:l,warnings:[]}},[e]),validateSettlement:(0,n.useMemo)(()=>e=>{let t=[];return(0,i.validateTransactionId)(e.id)||t.push({field:"id",code:"INVALID_ID",message:"Settlement ID is invalid"}),(0,i.isValidMoney)(e.amount)||t.push({field:"amount",code:"INVALID_AMOUNT",message:"Amount is invalid"}),(0,i.isValidCurrency)(e.currency)||t.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be a valid ISO 4217 code"}),(0,i.isValidISODate)(e.settlementDate)||t.push({field:"settlementDate",code:"INVALID_DATE",message:"Settlement date must be a valid ISO 8601 date string"}),{valid:0===t.length,errors:t,warnings:[]}},[e]),validateException:(0,n.useMemo)(()=>t=>{let r=[];if(t.id&&"string"==typeof t.id||r.push({field:"id",code:"REQUIRED_FIELD",message:"Exception ID is required"}),t.description&&"string"==typeof t.description){var n;let i=(null==e?void 0:null===(n=e.exception)||void 0===n?void 0:n.descriptionMaxLength)||1e3;t.description.length>i&&r.push({field:"description",code:"DESCRIPTION_TOO_LONG",message:"Description exceeds maximum length of ".concat(i," characters")})}else r.push({field:"description",code:"REQUIRED_FIELD",message:"Description is required"});return{valid:0===r.length,errors:r,warnings:[]}},[e])}};let n=r(7653),i=r(2087)},6002:function(e,t,r){"use strict";t.A1=t.m_=t.i9=t.Xc=t.yh=t.yg=void 0,t.Bo=void 0;var n=r(1774);Object.defineProperty(t,"yg",{enumerable:!0,get:function(){return n.ReconciliationDashboard}});var i=r(7817);Object.defineProperty(t,"yh",{enumerable:!0,get:function(){return i.TransactionTable}});var o=r(4238);Object.defineProperty(t,"Xc",{enumerable:!0,get:function(){return o.ExceptionTable}});var a=r(6464);Object.defineProperty(t,"i9",{enumerable:!0,get:function(){return a.MetricCard}});var s=r(201);Object.defineProperty(t,"m_",{enumerable:!0,get:function(){return s.RuleSet}});var l=r(198);Object.defineProperty(t,"A1",{enumerable:!0,get:function(){return l.MatchRule}}),r(1271),r(8244),r(3166),r(8860),r(9372),r(7441),r(5395),r(4537),r(9107),r(5789),r(1669),r(2400),r(4314),r(6268),r(4905),r(1822),r(2553),r(9410),r(2977);var c=r(7615);Object.defineProperty(t,"Bo",{enumerable:!0,get:function(){return c.compileToJSON}})},9410:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURE_FLAGS=void 0,t.setLicense=function(e){i=e,e.expiresAt&&new Date(e.expiresAt)<new Date&&(console.warn("License has expired. Falling back to OSS tier."),i={tier:"oss",features:new Set([t.FEATURE_FLAGS.CORE_PROTOCOL,t.FEATURE_FLAGS.BASIC_COMPONENTS])})},t.getLicense=function(){return i},t.hasFeature=o,t.hasTier=a,t.requireFeature=function(e,t){if(!o(e)){let r=t||e;throw Error("".concat(r," is a commercial feature. Upgrade to Settler Commercial to access this feature. ")+"Visit https://settler.dev/pricing to learn more.")}},t.requireTier=function(e){if(!a(e))throw Error("This feature requires ".concat({oss:"OSS",commercial:"Commercial",enterprise:"Enterprise"}[e]," tier. ")+"Visit https://settler.dev/pricing to upgrade.")},t.getUpgradeMessage=s,t.useFeature=function(e){return o(e)},t.useFeatureGate=function(e,t){let r=o(e);return{hasAccess:r,UpgradePrompt:t?()=>r?null:(0,n.jsx)(n.Fragment,{children:t}):()=>r?null:(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",border:"2px dashed #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,n.jsx)("h3",{style:{marginTop:0,color:"#111827"},children:"Upgrade Required"}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1rem"},children:s(e)}),(0,n.jsx)("a",{href:"https://settler.dev/pricing",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"6px",fontWeight:600},children:"View Pricing"})]})}};let n=r(7573),i={tier:"oss",features:new Set(["core","basic-components","validation","security-basic"])};function o(e){return i.features.has(e)}function a(e){let t={oss:0,commercial:1,enterprise:2};return t[i.tier]>=t[e]}function s(e){return"Upgrade to Settler Commercial to unlock ".concat(e,". Visit https://settler.dev/pricing")}t.FEATURE_FLAGS={CORE_PROTOCOL:"core",BASIC_COMPONENTS:"basic-components",VALIDATION:"validation",SECURITY_BASIC:"security-basic",MOBILE_BASIC:"mobile-basic",ACCESSIBILITY:"accessibility",MCP_INTEGRATION:"mcp-integration",SHOPIFY_INTEGRATION:"shopify-integration",STRIPE_INTEGRATION:"stripe-integration",WEBHOOK_MANAGER:"webhook-manager",ADVANCED_SECURITY:"advanced-security",AUDIT_LOGGING:"audit-logging",TELEMETRY:"telemetry",EXPORT_ADVANCED:"export-advanced",VIRTUALIZATION:"virtualization",PERFORMANCE_MONITORING:"performance-monitoring",CUSTOM_THEMES:"custom-themes",WHITE_LABEL:"white-label",SSO:"sso",RBAC:"rbac",CUSTOM_INTEGRATIONS:"custom-integrations",PRIORITY_SUPPORT:"priority-support",SLA:"sla",DEDICATED_INSTANCE:"dedicated-instance"}},5789:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFilteredTransactions=function(e,t){return(0,n.useMemo)(()=>e.filter(e=>{if(t.provider&&t.provider.length>0&&!t.provider.includes(e.provider)||t.status&&t.status.length>0&&!t.status.includes(e.status))return!1;if(t.dateRange){let r=new Date(e.date);if(t.dateRange.start&&r<new Date(t.dateRange.start)||t.dateRange.end&&r>new Date(t.dateRange.end))return!1}if(t.amountRange&&(void 0!==t.amountRange.min&&e.amount.value<t.amountRange.min||void 0!==t.amountRange.max&&e.amount.value>t.amountRange.max))return!1;if(t.search){let r=t.search.toLowerCase();if(![e.id,e.providerTransactionId,e.referenceId,e.provider,e.status].filter(Boolean).join(" ").toLowerCase().includes(r))return!1}return!0}),[e,t])},t.useSortedTransactions=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return(0,n.useMemo)(()=>t?[...e].sort((e,n)=>{let i=e[t],o=n[t];return null==i?1:null==o?-1:"string"==typeof i&&"string"==typeof o?"asc"===r?i.localeCompare(o):o.localeCompare(i):"number"==typeof i&&"number"==typeof o?"asc"===r?i-o:o-i:0}):e,[e,t,r])},t.useDebounce=function(e,t){let[r,i]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(r)}},[e,t]),r};let n=r(7653)},2400:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useBreakpoint=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,[t,r]=(0,n.useState)("xs");return(0,n.useEffect)(()=>{let t=()=>{let t=window.innerWidth;t>=e["2xl"]?r("2xl"):t>=e.xl?r("xl"):t>=e.lg?r("lg"):t>=e.md?r("md"):t>=e.sm?r("sm"):r("xs")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t},t.useMediaQuery=o,t.useIsMobile=function(){return o("(max-width: 768px)")},t.useIsTablet=function(){return o("(min-width: 769px) and (max-width: 1023px)")},t.useIsDesktop=function(){return o("(min-width: 1024px)")},t.getResponsiveColumns=function(e){return({xs:1,sm:2,md:3,lg:4,xl:4,"2xl":5})[e]};let n=r(7653),i={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function o(e){let[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=window.matchMedia(e);r(t.matches);let n=e=>{r(e.matches)};return t.addEventListener("change",n),()=>t.removeEventListener("change",n)},[e]),t}},1669:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMockTransaction=i,t.createMockSettlement=function(e){return{id:"st_".concat(Math.random().toString(36).substr(2,9)),provider:"stripe",providerSettlementId:"set_".concat(Math.random().toString(36).substr(2,9)),amount:{value:100,currency:"USD"},currency:"USD",settlementDate:new Date().toISOString(),status:"completed",...e}},t.createMockException=function(e){return{id:"exc_".concat(Math.random().toString(36).substr(2,9)),category:"amount_mismatch",severity:"high",description:"Transaction amount does not match settlement",resolutionStatus:"open",createdAt:new Date().toISOString(),...e}},t.createMockTransactions=function(e){return Array.from({length:e},(e,t)=>i({id:"tx_".concat(t),amount:{value:(t+1)*10,currency:"USD"}}))},t.TestWrapper=function(e){let{children:t,mode:i="ui",config:o={}}=e,{CompilationProvider:a}=r(9107);return(0,n.jsx)(a,{mode:i,config:o,children:t})},t.waitFor=function(e){return new Promise(t=>setTimeout(t,e))},t.createMockTelemetryProvider=function(){let e=[],t=[];return{track:t=>{e.push(t)},trackError:e=>{t.push(e)},trackPerformance:()=>{},flush:async()=>{},setUser:()=>{},setContext:()=>{},getEvents:()=>e,getErrors:()=>t,clear:()=>{e.length=0,t.length=0}}};let n=r(7573);function i(e){return{id:"tx_".concat(Math.random().toString(36).substr(2,9)),provider:"stripe",providerTransactionId:"ch_".concat(Math.random().toString(36).substr(2,9)),amount:{value:100,currency:"USD"},currency:"USD",date:new Date().toISOString(),status:"succeeded",...e}}},4314:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookManager=void 0,t.createWebhookManager=a,t.createShopifyWebhookAdapter=function(e){let t=a(e);return{handleShopifyWebhook:async e=>{let r={"orders/create":"transaction.created","orders/paid":"transaction.updated","payouts/create":"settlement.created"}[e.event]||"transaction.created";await t.emit(r,e.data)},manager:t}},t.createStripeWebhookAdapter=function(e){let t=a(e);return{handleStripeWebhook:async e=>{let r={"charge.succeeded":"transaction.created","charge.refunded":"transaction.updated","payout.paid":"settlement.created"}[e.type]||"transaction.created";await t.emit(r,e.data.object)},manager:t}};let n=r(2087),i=r(9410);class o{on(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{let r=this.handlers.get(e);if(r){let e=r.indexOf(t);e>-1&&r.splice(e,1)}}}async emit(e,t){let r=this.handlers.get(e)||[],i={id:(0,n.generateSecureId)("wh"),event:e,timestamp:new Date().toISOString(),data:this.sanitizeData(t)};this.secret&&(i.signature=await this.signPayload(i)),await Promise.all(r.map(e=>e(i)))}async verifySignature(e,t){return!!this.secret&&t===await this.signPayload(e)}sanitizeData(e){if("string"==typeof e)return(0,n.sanitizeString)(e);if(Array.isArray(e))return e.map(e=>this.sanitizeData(e));if(e&&"object"==typeof e){let t={};for(let[r,i]of Object.entries(e))t[(0,n.sanitizeString)(r)]=this.sanitizeData(i);return t}return e}async signPayload(e){let t="".concat(e.id,":").concat(e.event,":").concat(e.timestamp),r=new TextEncoder().encode(t+this.secret);return"undefined"!=typeof crypto&&crypto.subtle?Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join(""):btoa(t+this.secret).substring(0,64)}constructor(e){this.handlers=new Map,(0,i.requireFeature)(i.FEATURE_FLAGS.WEBHOOK_MANAGER,"Webhook Manager"),this.secret=e||(0,n.generateSecureId)("webhook")}}function a(e){return new o(e)}t.WebhookManager=o},2410:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettlerClient=void 0;let n=r(6768),i=r(8608),o=r(8687),a=r(557),s=r(8944),l=r(7566),c=r(3678),d=r(6950),u=r(6560);class p{use(e){this.middlewareChain.use(e)}async request(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=async()=>{let n={method:e,path:t,headers:{},body:r.body,...void 0!==r.query&&{query:r.query}};return(await this.middlewareChain.execute(n,async e=>this.executeRequest(e))).data};return this.deduplicateRequests&&"GET"===e?(0,c.withDeduplication)(e,t,r.body,()=>(0,l.withRetry)(n,this.retryConfig)):(0,l.withRetry)(n,this.retryConfig)}async executeRequest(e){let t;let r=new URL("".concat(this.baseUrl).concat(e.path));if(e.query&&Object.entries(e.query).forEach(e=>{let[t,n]=e;r.searchParams.append(t,n)}),this.tokenManager){let e=await this.tokenManager.getToken();t="Bearer ".concat(e)}else t=this.apiKey;let n={"Content-Type":"application/json",...this.tokenManager?{Authorization:t}:{"X-API-Key":t},...e.headers},i={method:e.method,headers:n};void 0!==e.body&&null!==e.body&&(i.body=JSON.stringify(e.body));let o=new AbortController,a=setTimeout(()=>o.abort(),this.timeout);try{let e;let t=await fetch(r.toString(),{...i,signal:o.signal});clearTimeout(a);let n={};t.headers.forEach((e,t)=>{n[t]=e});let l=t.headers.get("content-type");if(e=(null==l?void 0:l.includes("application/json"))?await t.json():await t.text(),!t.ok)throw(0,s.parseError)(t,e);return{status:t.status,headers:n,data:e}}catch(e){if(clearTimeout(a),e instanceof s.SettlerError)throw e;if(e instanceof Error){if("AbortError"===e.name)throw new s.NetworkError("Request timeout after ".concat(this.timeout,"ms"));throw new s.NetworkError(e.message,e)}throw new s.NetworkError("Request failed")}}constructor(e){if(!e.apiKey)throw Error("API key is required");this.apiKey=e.apiKey,this.baseUrl=e.baseUrl||"https://api.settler.io",this.timeout=e.timeout||3e4,this.retryConfig=e.retry||{},this.deduplicateRequests=!1!==e.deduplicateRequests,e.tokenRefresh&&(this.tokenManager=new d.TokenManager(e.tokenRefresh)),this.middlewareChain=new u.MiddlewareChain,e.middleware&&e.middleware.forEach(e=>this.middlewareChain.use(e)),e.enableLogging&&this.middlewareChain.use((0,u.createLoggingMiddleware)(e.logger)),this.jobs=new n.JobsClient(this),this.reports=new i.ReportsClient(this),this.webhooks=new o.WebhooksClient(this),this.adapters=new a.AdaptersClient(this)}}t.SettlerClient=p},557:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptersClient=void 0;let n=r(5059);class i{async list(e){let t={};return(null==e?void 0:e.cursor)&&(t.cursor=e.cursor),(null==e?void 0:e.limit)&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/adapters",{query:t})}async get(e){return this.client.request("GET","/api/v1/adapters/".concat(e))}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}constructor(e){this.client=e}}t.AdaptersClient=i},6768:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobsClient=void 0;let n=r(5059);class i{async create(e){return this.client.request("POST","/api/v1/jobs",{body:e})}async list(e){let t={};return(null==e?void 0:e.cursor)&&(t.cursor=e.cursor),(null==e?void 0:e.limit)&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/jobs",{query:t})}async get(e){return this.client.request("GET","/api/v1/jobs/".concat(e))}async run(e){return this.client.request("POST","/api/v1/jobs/".concat(e,"/run"))}async delete(e){await this.client.request("DELETE","/api/v1/jobs/".concat(e))}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}constructor(e){this.client=e}}t.JobsClient=i},8608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportsClient=void 0;let n=r(5059);class i{async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return t.startDate&&(r.startDate=t.startDate),t.endDate&&(r.endDate=t.endDate),t.format&&(r.format=t.format),this.client.request("GET","/api/v1/reports/".concat(e),{query:r})}async list(e){let t={};return(null==e?void 0:e.cursor)&&(t.cursor=e.cursor),(null==e?void 0:e.limit)&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/reports",{query:t})}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}constructor(e){this.client=e}}t.ReportsClient=i},8687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebhooksClient=void 0;let n=r(5059);class i{async create(e){return this.client.request("POST","/api/v1/webhooks",{body:e})}async list(e){let t={};return(null==e?void 0:e.cursor)&&(t.cursor=e.cursor),(null==e?void 0:e.limit)&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/webhooks",{query:t})}async get(e){return this.client.request("GET","/api/v1/webhooks/".concat(e))}async delete(e){await this.client.request("DELETE","/api/v1/webhooks/".concat(e))}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}constructor(e){this.client=e}}t.WebhooksClient=i},8944:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.ServerError=t.RateLimitError=t.ValidationError=t.AuthError=t.NetworkError=t.SettlerError=void 0,t.parseError=function(e,t){let n=e.status,l="object"==typeof t&&null!==t?t:{},c=l.message||l.error||"HTTP ".concat(n,": ").concat(e.statusText);switch(n){case 400:return new o(c,void 0,n,l.details);case 401:case 403:return new i(c,n,l.details);case 429:{let t=e.headers.get("Retry-After"),r=e.headers.get("X-RateLimit-Limit"),n=e.headers.get("X-RateLimit-Remaining"),i=e.headers.get("X-RateLimit-Reset");return new a(c,t?parseInt(t,10):void 0,r?parseInt(r,10):void 0,n?parseInt(n,10):void 0,i?parseInt(i,10):void 0)}case 500:case 502:case 503:case 504:return new s(c,n,l.details);default:return new r(c,"API_ERROR",n,l.details)}};class r extends Error{constructor(e,t,r,n){var i,o;super(e),this.name=this.constructor.name,this.code=t,void 0!==r&&(this.statusCode=r),void 0!==n&&(this.details=n),null===(i=(o=Error).captureStackTrace)||void 0===i||i.call(o,this,this.constructor)}}t.SettlerError=r;class n extends r{constructor(e,t){super(e,"NETWORK_ERROR",void 0,{cause:t}),this.name="NetworkError"}}t.NetworkError=n;class i extends r{constructor(e,t,r){super(e,"AUTH_ERROR",t||401,r),this.name="AuthError"}}t.AuthError=i;class o extends r{constructor(e,t,r,n){super(e,"VALIDATION_ERROR",r||400,n),this.name="ValidationError",void 0!==t&&(this.field=t)}}t.ValidationError=o;class a extends r{constructor(e,t,r,n,i){super(e,"RATE_LIMIT_ERROR",429),this.name="RateLimitError",void 0!==t&&(this.retryAfter=t),void 0!==r&&(this.limit=r),void 0!==n&&(this.remaining=n),void 0!==i&&(this.reset=i)}}t.RateLimitError=a;class s extends r{constructor(e,t,r){super(e,"SERVER_ERROR",t||500,r),this.name="ServerError"}}t.ServerError=s;class l extends r{constructor(e,t){super(e,"UNKNOWN_ERROR",void 0,{cause:t}),this.name="UnknownError"}}t.UnknownError=l},6961:function(e,t,r){"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptersClient=t.WebhooksClient=t.ReportsClient=t.JobsClient=t.SettlerClient=t.withRetry=t.createMetricsMiddleware=t.createLoggingMiddleware=t.MiddlewareChain=t.TokenManager=t.extractWebhookTimestamp=t.verifyWebhookSignatureWithTimestamp=t.verifyWebhookSignature=t.PaginatedIterator=t.collectPaginated=t.createPaginatedIterator=t.parseError=t.UnknownError=t.ServerError=t.RateLimitError=t.ValidationError=t.AuthError=t.NetworkError=t.SettlerError=void 0;let i=r(2410);Object.defineProperty(t,"SettlerClient",{enumerable:!0,get:function(){return i.SettlerClient}});let o=r(6768);Object.defineProperty(t,"JobsClient",{enumerable:!0,get:function(){return o.JobsClient}});let a=r(8608);Object.defineProperty(t,"ReportsClient",{enumerable:!0,get:function(){return a.ReportsClient}});let s=r(8687);Object.defineProperty(t,"WebhooksClient",{enumerable:!0,get:function(){return s.WebhooksClient}});let l=r(557);Object.defineProperty(t,"AdaptersClient",{enumerable:!0,get:function(){return l.AdaptersClient}}),function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)}(r(6312),t);var c=r(8944);Object.defineProperty(t,"SettlerError",{enumerable:!0,get:function(){return c.SettlerError}}),Object.defineProperty(t,"NetworkError",{enumerable:!0,get:function(){return c.NetworkError}}),Object.defineProperty(t,"AuthError",{enumerable:!0,get:function(){return c.AuthError}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return c.ValidationError}}),Object.defineProperty(t,"RateLimitError",{enumerable:!0,get:function(){return c.RateLimitError}}),Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return c.ServerError}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return c.UnknownError}}),Object.defineProperty(t,"parseError",{enumerable:!0,get:function(){return c.parseError}});var d=r(5059);Object.defineProperty(t,"createPaginatedIterator",{enumerable:!0,get:function(){return d.createPaginatedIterator}}),Object.defineProperty(t,"collectPaginated",{enumerable:!0,get:function(){return d.collectPaginated}}),Object.defineProperty(t,"PaginatedIterator",{enumerable:!0,get:function(){return d.PaginatedIterator}});var u=r(970);Object.defineProperty(t,"verifyWebhookSignature",{enumerable:!0,get:function(){return u.verifyWebhookSignature}}),Object.defineProperty(t,"verifyWebhookSignatureWithTimestamp",{enumerable:!0,get:function(){return u.verifyWebhookSignatureWithTimestamp}}),Object.defineProperty(t,"extractWebhookTimestamp",{enumerable:!0,get:function(){return u.extractWebhookTimestamp}});var p=r(6950);Object.defineProperty(t,"TokenManager",{enumerable:!0,get:function(){return p.TokenManager}});var h=r(6560);Object.defineProperty(t,"MiddlewareChain",{enumerable:!0,get:function(){return h.MiddlewareChain}}),Object.defineProperty(t,"createLoggingMiddleware",{enumerable:!0,get:function(){return h.createLoggingMiddleware}}),Object.defineProperty(t,"createMetricsMiddleware",{enumerable:!0,get:function(){return h.createMetricsMiddleware}});var f=r(7566);Object.defineProperty(t,"withRetry",{enumerable:!0,get:function(){return f.withRetry}}),t.default=i.SettlerClient},6312:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3678:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDeduplication=n,t.clearPendingRequests=function(){r.clear()};let r=new Map;async function n(e,t,n,i){!function(){let e=Date.now();for(let[t,n]of r.entries())e-n.timestamp>6e4&&r.delete(t)}();let o=function(e,t,r){let n=r?JSON.stringify(r):"";return"".concat(e,":").concat(t,":").concat(n)}(e,t,n),a=r.get(o);if(a)return a.promise;let s=i().finally(()=>{r.delete(o)});return r.set(o,{promise:s,timestamp:Date.now()}),s}},6560:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiddlewareChain=void 0,t.createLoggingMiddleware=function(e){let t=(null==e?void 0:e.info)||console.log,r=(null==e?void 0:e.error)||console.error;return async(e,n)=>{let i=Date.now();t("[Settler SDK] ".concat(e.method," ").concat(e.path),{method:e.method,path:e.path,headers:e.headers});try{let r=await n(),o=Date.now()-i;return t("[Settler SDK] ".concat(e.method," ").concat(e.path," ").concat(r.status," (").concat(o,"ms)"),{method:e.method,path:e.path,status:r.status,duration:o}),r}catch(n){let t=Date.now()-i;throw r("[Settler SDK] ".concat(e.method," ").concat(e.path," ERROR (").concat(t,"ms)"),{method:e.method,path:e.path,error:n,duration:t}),n}}},t.createMetricsMiddleware=function(e){return async(t,r)=>{var n,i,o,a,s;let l=Date.now();null==e||null===(n=e.increment)||void 0===n||n.call(e,"settler.request.started",{method:t.method,path:t.path});try{let n=await r(),a=Date.now()-l;return null==e||null===(i=e.histogram)||void 0===i||i.call(e,"settler.request.duration",a,{method:t.method,path:t.path,status:String(n.status)}),null==e||null===(o=e.increment)||void 0===o||o.call(e,"settler.request.completed",{method:t.method,path:t.path,status:String(n.status)}),n}catch(n){let r=Date.now()-l;throw null==e||null===(a=e.histogram)||void 0===a||a.call(e,"settler.request.duration",r,{method:t.method,path:t.path,status:"error"}),null==e||null===(s=e.increment)||void 0===s||s.call(e,"settler.request.failed",{method:t.method,path:t.path}),n}}};class r{use(e){this.middlewares.push(e)}async execute(e,t){let r=0,n=async()=>{if(r>=this.middlewares.length)return t(e);let i=this.middlewares[r++];return i?i(e,n):t(e)};return n()}constructor(){this.middlewares=[]}}t.MiddlewareChain=r},5059:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaginatedIterator=void 0,t.createPaginatedIterator=function(e){return new r(e)},t.collectPaginated=n;class r{async next(){if(this.currentIndex<this.currentPage.length){let e=this.currentPage[this.currentIndex++];if(void 0!==e)return{done:!1,value:e}}if(!this.hasMore)return{done:!0,value:void 0};try{var e;let t={};void 0!==this.currentCursor&&(t.cursor=this.currentCursor);let r=await this.fetchPage(t);if(this.currentPage=r.data,this.currentIndex=0,void 0!==r.nextCursor&&(this.currentCursor=r.nextCursor),this.hasMore=null!==(e=r.hasMore)&&void 0!==e?e:void 0!==r.nextCursor,0===this.currentPage.length)return{done:!0,value:void 0};let n=this.currentPage[this.currentIndex++];if(void 0!==n)return{done:!1,value:n};return{done:!0,value:void 0}}catch(e){throw e}}[Symbol.asyncIterator](){return this}constructor(e){this.currentPage=[],this.currentIndex=0,this.hasMore=!0,this.fetchPage=e}}async function n(e){let t=[];for await(let r of e)t.push(r);return t}t.PaginatedIterator=r},7566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withRetry=o;let n=r(8944),i={maxRetries:3,initialDelay:1e3,maxDelay:3e4,multiplier:2,retryOnRateLimit:!0,shouldRetry:()=>!0};async function o(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={...i,...r};for(let r=0;r<=o.maxRetries;r++)try{return await e()}catch(a){let e;if(t=a instanceof n.SettlerError?a:new n.NetworkError(String(a),a),r===o.maxRetries)break;let i=t instanceof n.NetworkError||t instanceof n.RateLimitError&&o.retryOnRateLimit||void 0!==t.statusCode&&t.statusCode>=500;if(!(o.shouldRetry(t,r)&&i))break;e=t instanceof n.RateLimitError&&t.retryAfter?1e3*t.retryAfter:function(e,t,r,n){let i=t*Math.pow(n,e);return Math.min(i+.1*Math.random()*i,r)}(r,o.initialDelay,o.maxDelay,o.multiplier),await function(e){return new Promise(t=>setTimeout(t,e))}(e)}throw t}},6950:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenManager=void 0;class r{async getToken(){let e=Date.now();if(!this.tokenInfo||this.tokenInfo.expiresAt-e<this.config.refreshThreshold){if(this.refreshPromise)return this.tokenInfo=await this.refreshPromise,this.refreshPromise=null,this.tokenInfo.token;this.refreshPromise=this.config.refreshFn();try{return this.tokenInfo=await this.refreshPromise,this.refreshPromise=null,this.tokenInfo.token}catch(e){throw this.refreshPromise=null,e}}if(!this.tokenInfo)throw Error("Token is not available");return this.tokenInfo.token}setToken(e){this.tokenInfo=e}clearToken(){this.tokenInfo=null,this.refreshPromise=null}constructor(e){var t;this.tokenInfo=null,this.refreshPromise=null,this.config={refreshThreshold:null!==(t=e.refreshThreshold)&&void 0!==t?t:3e5,refreshFn:e.refreshFn}}}t.TokenManager=r},970:function(e,t,r){"use strict";var n=r(7376).Buffer;function i(e,t,i){if(!t||!i)return!1;let o=t.split(",").find(e=>e.startsWith("v1="));if(!o)return!1;let a=o.substring(3);try{let t;let o=function(){try{return r(6736)}catch(e){}throw Error("Webhook signature verification requires Node.js crypto module or a crypto library")}(),s=o.createHmac("sha256",i);t="string"==typeof e?e:n.isBuffer(e)?e.toString():e instanceof ArrayBuffer?n.from(e).toString():String(e),s.update(t);let l=s.digest("hex");if(o.timingSafeEqual)return o.timingSafeEqual(n.from(a,"hex"),n.from(l,"hex"));if(a.length!==l.length)return!1;let c=0;for(let e=0;e<a.length;e++)c|=a.charCodeAt(e)^l.charCodeAt(e);return 0===c}catch(e){return!1}}function o(e){let t=e.split(",").find(e=>e.startsWith("t="));if(!t)return null;let r=parseInt(t.substring(2),10);return isNaN(r)?null:1e3*r}Object.defineProperty(t,"__esModule",{value:!0}),t.verifyWebhookSignature=i,t.extractWebhookTimestamp=o,t.verifyWebhookSignatureWithTimestamp=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e5;if(!i(e,t,r))return!1;let a=o(t);if(!a)return!1;let s=Date.now()-a;return s>=0&&s<=n}},1455:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l},dynamic:function(){return s}});var n=r(7573),i=r(7653),o=r(6002),a=r(6961);let s="force-dynamic";function l(){let[e]=(0,i.useState)(()=>new URLSearchParams(window.location.search).get("apiKey")||""),[t]=(0,i.useState)(()=>e?new a.SettlerClient({apiKey:e}):null),[r,s]=(0,i.useState)([]),[l,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(!0),[p,h]=(0,i.useState)(""),f=(0,i.useCallback)(async()=>{if(t&&e)try{u(!0);let e=((await t.jobs.list({limit:10})).data||[]).map((e,t)=>{var r;return{id:"tx-".concat(e.id),provider:(null===(r=e.source)||void 0===r?void 0:r.adapter)||"stripe",providerTransactionId:"ch_".concat(e.id.slice(0,10)),amount:{value:100*(t+1),currency:"USD"},currency:"USD",date:e.createdAt||new Date().toISOString(),status:"succeeded",referenceId:e.name}}),r=[{id:"exc-1",category:"amount_mismatch",severity:"high",description:"Transaction amount does not match settlement",resolutionStatus:"open",createdAt:new Date().toISOString()}];s(e),c(r);let i=(0,n.jsx)(o.yg,{children:(0,n.jsxs)(o.m_,{id:"demo-rules",name:"Demo Rules",priority:"exact-first",children:[(0,n.jsx)(o.A1,{id:"rule-1",name:"Exact Amount Match",field:"amount",type:"exact",priority:1}),(0,n.jsx)(o.A1,{id:"rule-2",name:"Date Range Match",field:"date",type:"range",tolerance:{days:7},priority:2})]})}),a=(0,o.Bo)(i,{name:"Settler Dashboard Demo",description:"Demo reconciliation workflow",pretty:!0});h(a)}catch(e){console.error("Failed to load data:",e)}finally{u(!1)}},[t,e]);return((0,i.useEffect)(()=>{e&&f()},[e,f]),e)?d?(0,n.jsx)("div",{className:"container mx-auto p-6",children:(0,n.jsx)("div",{className:"text-center py-12",children:(0,n.jsx)("div",{className:"text-lg",children:"Loading reconciliation data..."})})}):(0,n.jsxs)("div",{className:"container mx-auto p-6",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"React.Settler Demo"}),(0,n.jsx)("p",{className:"text-gray-600",children:"This page demonstrates the @settler/react-settler component library integrated into the Settler dashboard."})]}),(0,n.jsxs)(o.yg,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,n.jsx)(o.i9,{title:"Total Transactions",value:r.length,subtitle:"Reconciliation transactions"}),(0,n.jsx)(o.i9,{title:"Match Rate",value:"95%",subtitle:"19 of 20 matched",trend:"up"}),(0,n.jsx)(o.i9,{title:"Exceptions",value:l.length,subtitle:"Requiring review",trend:"neutral"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Transactions"})}),(0,n.jsx)("div",{className:"p-6",children:(0,n.jsx)(o.yh,{transactions:r,onSelect:e=>{console.log("Selected transaction:",e),alert("Selected transaction: ".concat(e.id))}})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Exceptions"})}),(0,n.jsx)("div",{className:"p-6",children:(0,n.jsx)(o.Xc,{exceptions:l,onResolve:e=>{console.log("Resolving exception:",e),alert("Resolving exception: ".concat(e.id))}})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,n.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Compiled Configuration"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"JSON config extracted from React component tree"})]}),(0,n.jsx)("div",{className:"p-6",children:(0,n.jsx)("pre",{className:"bg-gray-50 p-4 rounded overflow-auto text-sm",children:p})})]})]})]}):(0,n.jsx)("div",{className:"container mx-auto p-6",children:(0,n.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,n.jsxs)("p",{className:"text-yellow-800",children:["Please provide an API key via the ",(0,n.jsx)("code",{children:"?apiKey=..."})," query parameter."]})})})}}},function(e){e.O(0,[44,919,293,528,744],function(){return e(e.s=6583)}),_N_E=e.O()}]);