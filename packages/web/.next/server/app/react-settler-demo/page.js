(()=>{var e={};e.id=312,e.ids=[312],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},1360:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(6050),r(7718),r(7824);var n=r(3282),i=r(5736),o=r(3906),a=r.n(o),s=r(6880),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["react-settler-demo",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6050)),"/workspace/packages/web/src/app/react-settler-demo/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7718)),"/workspace/packages/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/packages/web/src/app/react-settler-demo/page.tsx"],u="/react-settler-demo/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/react-settler-demo/page",pathname:"/react-settler-demo",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7229:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},4738:()=>{},5024:(e,t,r)=>{Promise.resolve().then(r.bind(r,5162))},7256:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationError=t.CompilationError=t.SecurityError=t.ValidationError=t.ReconciliationError=void 0;class r extends Error{constructor(e,t,r,n){super(e),this.name="ReconciliationError",this.code=t,this.statusCode=r,this.details=n,this.timestamp=new Date().toISOString(),Error.captureStackTrace(this,this.constructor)}}t.ReconciliationError=r;class n extends r{constructor(e,t,r,n){super(e,"VALIDATION_ERROR",400,n),this.name="ValidationError",this.field=t,this.value=r}}t.ValidationError=n;class i extends r{constructor(e,t){super(e,"SECURITY_ERROR",403,t),this.name="SecurityError"}}t.SecurityError=i;class o extends r{constructor(e,t,r,n,i){super(e,"COMPILATION_ERROR",500,i),this.name="CompilationError",this.component=t,this.line=r,this.column=n}}t.CompilationError=o;class a extends r{constructor(e,t,r){super(e,"CONFIGURATION_ERROR",500,r),this.name="ConfigurationError",this.configPath=t}}t.ConfigurationError=a},7783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=t.generateSecureId=t.maskPII=t.validateTransactionId=t.sanitizeTransactionMetadata=t.formatMoney=t.isValidMoney=t.isValidCurrency=t.isValidISODate=t.sanitizeString=t.ConfigurationError=t.CompilationError=t.SecurityError=t.ProtocolValidationError=t.ReconciliationError=void 0;var n=r(7256);Object.defineProperty(t,"ReconciliationError",{enumerable:!0,get:function(){return n.ReconciliationError}}),Object.defineProperty(t,"ProtocolValidationError",{enumerable:!0,get:function(){return n.ValidationError}}),Object.defineProperty(t,"SecurityError",{enumerable:!0,get:function(){return n.SecurityError}}),Object.defineProperty(t,"CompilationError",{enumerable:!0,get:function(){return n.CompilationError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return n.ConfigurationError}});var i=r(7716);Object.defineProperty(t,"sanitizeString",{enumerable:!0,get:function(){return i.sanitizeString}}),Object.defineProperty(t,"isValidISODate",{enumerable:!0,get:function(){return i.isValidISODate}}),Object.defineProperty(t,"isValidCurrency",{enumerable:!0,get:function(){return i.isValidCurrency}}),Object.defineProperty(t,"isValidMoney",{enumerable:!0,get:function(){return i.isValidMoney}}),Object.defineProperty(t,"formatMoney",{enumerable:!0,get:function(){return i.formatMoney}}),Object.defineProperty(t,"sanitizeTransactionMetadata",{enumerable:!0,get:function(){return i.sanitizeTransactionMetadata}}),Object.defineProperty(t,"validateTransactionId",{enumerable:!0,get:function(){return i.validateTransactionId}}),Object.defineProperty(t,"maskPII",{enumerable:!0,get:function(){return i.maskPII}}),Object.defineProperty(t,"generateSecureId",{enumerable:!0,get:function(){return i.generateSecureId}}),Object.defineProperty(t,"deepClone",{enumerable:!0,get:function(){return i.deepClone}})},7716:(e,t)=>{"use strict";function r(e){return"string"!=typeof e?"":e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}function n(e){return!!e&&"string"==typeof e&&/^[A-Z]{3}$/.test(e)}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.value||isNaN(e.value)||!isFinite(e.value))&&!(e.value<0)&&n(e.currency)}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeString=r,t.isValidISODate=function(e){if(!e||"string"!=typeof e)return!1;let t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())&&t.toISOString()===e},t.isValidCurrency=n,t.isValidMoney=i,t.formatMoney=function(e,t="en-US"){if(!i(e))return"Invalid";try{return new Intl.NumberFormat(t,{style:"currency",currency:e.currency}).format(e.value)}catch{return`${e.currency} ${e.value.toFixed(2)}`}},t.sanitizeTransactionMetadata=function(e){if(!e||"object"!=typeof e)return;let t={};for(let[n,i]of Object.entries(e)){let e=r(n);e&&("string"==typeof i?t[e]=r(i):"number"==typeof i||"boolean"==typeof i?t[e]=i:null===i&&(t[e]=null))}return t},t.validateTransactionId=function(e){return!!e&&"string"==typeof e&&e.length>0&&e.length<=255&&/^[a-zA-Z0-9_-]+$/.test(e)},t.maskPII=function(e,t="*"){return e&&"string"==typeof e?e=(e=e.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,e=>{let[r,n]=e.split("@");return r&&n?`${r[0]}${t.repeat(Math.max(0,r.length-2))}@${n}`:e})).replace(/\b\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}\b/g,e=>`****-****-****-${e.slice(-4)}`):""},t.generateSecureId=function(e="id"){let t=new Uint8Array(16);if("undefined"!=typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=Math.floor(256*Math.random());let r=Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("");return`${e}_${r}`},t.deepClone=function e(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array)return t.map(t=>e(t));if("object"==typeof t){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n]));return r}return t}},9151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactSettlerMCPServer=void 0,t.createMCPServer=function(e){return new i(e)};let n=r(3979);class i{constructor(e){this.workflows=new Map,(0,n.requireFeature)(n.FEATURE_FLAGS.MCP_INTEGRATION,"MCP Server Integration"),this.config=e}registerWorkflow(e,t){this.workflows.set(e,t)}getServerInfo(){return this.config}listResources(){let e=[];return this.workflows.forEach((t,r)=>{e.push({uri:`settler://workflow/${r}`,name:t.metadata.name,description:t.metadata.description??void 0,mimeType:"application/json"})}),e}getResource(e){let t=e.match(/^settler:\/\/workflow\/(.+)$/);if(!t||!t[1])return null;let r=t[1];return this.workflows.get(r)||null}listTools(){return[{name:"compile_reconciliation_workflow",description:"Compile a React.Settler workflow to JSON configuration",inputSchema:{type:"object",properties:{workflowId:{type:"string",description:"ID of the workflow to compile"}},required:["workflowId"]}},{name:"validate_transaction",description:"Validate a reconciliation transaction",inputSchema:{type:"object",properties:{transaction:{type:"object",description:"Transaction object to validate"}},required:["transaction"]}},{name:"create_reconciliation_workflow",description:"Create a new reconciliation workflow configuration",inputSchema:{type:"object",properties:{name:{type:"string"},description:{type:"string"},rulesets:{type:"array"}},required:["name"]}}]}async callTool(e,t){switch(e){case"compile_reconciliation_workflow":return this.compileWorkflow(t.workflowId);case"validate_transaction":return this.validateTransaction(t.transaction);case"create_reconciliation_workflow":return this.createWorkflow(t);default:throw Error(`Unknown tool: ${e}`)}}compileWorkflow(e){let t=this.workflows.get(e);if(!t)throw Error(`Workflow not found: ${e}`);return t}validateTransaction(e){let t=[];return e.id||t.push("Transaction ID is required"),e.amount&&"number"==typeof e.amount.value||t.push("Valid amount is required"),e.currency||t.push("Currency is required"),{valid:0===t.length,errors:t}}createWorkflow(e){return{version:"1.0.0",metadata:{name:e.name,description:e.description,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},rulesets:e.rulesets||[],views:[],widgets:{}}}}t.ReactSettlerMCPServer=i},9039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShopifyApp=function({shop:e,transactions:t=[],exceptions:r=[],onAction:o}){let{hasAccess:c,UpgradePrompt:u}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.SHOPIFY_INTEGRATION);return c?(0,n.jsx)("div",{style:{padding:"1rem",maxWidth:"100%",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},"data-shopify-app":!0,"data-shop":e,children:(0,n.jsxs)(a.ReconciliationDashboard,{children:[(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:600,marginBottom:"0.5rem"},children:"Payment Reconciliation"}),(0,n.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Shop: ",e]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,n.jsx)(d.MetricCard,{title:"Total Transactions",value:t.length,subtitle:"This period"}),(0,n.jsx)(d.MetricCard,{title:"Match Rate",value:`${Math.round((t.length-r.length)/Math.max(t.length,1)*100)}%`,subtitle:"Successfully matched",trend:"up"}),(0,n.jsx)(d.MetricCard,{title:"Exceptions",value:r.length,subtitle:"Requiring review",trend:r.length>0?"down":"neutral"})]}),t.length>0&&(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.75rem"},children:"Transactions"}),(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(s.TransactionTable,{transactions:t,onSelect:e=>o?.("transaction.selected",e)})})]}),r.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,marginBottom:"0.75rem"},children:"Exceptions"}),(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(l.ExceptionTable,{exceptions:r,onResolve:e=>o?.("exception.resolved",e)})})]})]})}):(0,n.jsx)(u,{})},t.useShopifyAppBridge=function(){let[e,t]=o.default.useState(""),[r,n]=o.default.useState("");return o.default.useEffect(()=>{},[]),{shop:e,apiKey:r,setApiKey:n}};let n=r(3227),i=r(3979),o=function(e){return e&&e.__esModule?e:{default:e}}(r(3677)),a=r(6892),s=r(8069),l=r(7838),d=r(5217)},4145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StripeApp=function({accountId:e,transactions:t=[],exceptions:r=[],onExport:u}){let{hasAccess:p}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.STRIPE_INTEGRATION);return p?(0,n.jsx)("div",{style:{padding:"1.5rem",backgroundColor:"#fafafa",minHeight:"100vh"},"data-stripe-app":!0,"data-account-id":e,children:(0,n.jsxs)(o.ReconciliationDashboard,{children:[(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.75rem",fontWeight:600},children:"Reconciliation Dashboard"}),t.length>0&&(0,n.jsx)(d.ExportButton,{data:t,format:"csv",onExport:u})]}),(0,n.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Stripe Account: ",e]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,n.jsx)(l.MetricCard,{title:"Total Revenue",value:`$${t.reduce((e,t)=>e+t.amount.value,0).toFixed(2)}`,subtitle:"This period"}),(0,n.jsx)(l.MetricCard,{title:"Transactions",value:t.length,subtitle:"Processed"}),(0,n.jsx)(l.MetricCard,{title:"Match Rate",value:`${Math.round((t.length-r.length)/Math.max(t.length,1)*100)}%`,subtitle:"Successfully matched",trend:"up"}),(0,n.jsx)(l.MetricCard,{title:"Exceptions",value:r.length,subtitle:"Requiring review",trend:r.length>0?"down":"neutral"})]}),t.length>0&&(0,n.jsx)("div",{style:{marginBottom:"2rem"},children:(0,n.jsx)(a.TransactionTable,{transactions:t})}),r.length>0&&(0,n.jsx)("div",{children:(0,n.jsx)(s.ExceptionTable,{exceptions:r})})]})}):(0,n.jsx)(c.UpgradePrompt,{feature:i.FEATURE_FLAGS.STRIPE_INTEGRATION,featureName:"Stripe Integration"})};let n=r(3227),i=r(3979),o=r(6892),a=r(8069),s=r(7838),l=r(5217),d=r(778),c=r(3357)},3856:(e,t)=>{"use strict";function r(e,t){let r={version:"1.0.0",metadata:{name:t?.name||"Reconciliation Workflow",...t?.description?{description:t.description}:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},rulesets:[],views:[],widgets:{}};return{version:r.version||"1.0.0",metadata:{name:r.metadata?.name||"Reconciliation Workflow",...r.metadata?.description?{description:r.metadata.description}:{},createdAt:r.metadata?.createdAt||new Date().toISOString(),updatedAt:r.metadata?.updatedAt||new Date().toISOString()},rulesets:r.rulesets||[],views:r.views||[],widgets:r.widgets||{}}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileToConfig=r,t.compileToJSON=function(e,t){let n=r(e,t);return t?.pretty?JSON.stringify(n,null,2):JSON.stringify(n)}},3091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;let n=r(3227),i=r(3677);class o extends i.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t),this.props.telemetryProvider&&this.props.telemetryProvider.trackError({error:e,component:"ErrorBoundary",context:{componentStack:t.componentStack},timestamp:new Date().toISOString()})}render(){return this.state.hasError&&this.state.error?this.props.fallback?"function"==typeof this.props.fallback?this.props.fallback(this.state.error,this.state.errorInfo):this.props.fallback:(0,n.jsxs)("div",{style:{padding:"2rem",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff5f5"},children:[(0,n.jsx)("h2",{style:{color:"#c53030",marginTop:0},children:"Something went wrong"}),(0,n.jsx)("p",{style:{color:"#742a2a"},children:this.state.error.message||"An unexpected error occurred"}),!1]}):this.props.children}}t.ErrorBoundary=o},7838:(e,t,r)=>{"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},o=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var o=e(t),a=0;a<o.length;a++)"default"!==o[a]&&n(r,t,o[a]);return i(r,t),r}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionTable=void 0;let a=r(3227),s=o(r(3677)),l=r(7783),d=r(2477),c=r(2102);t.ExceptionTable=s.default.memo(function({exceptions:e,onResolve:t,className:r,showSeverity:n=!0,showCategory:i=!0}){let o=(0,d.useCompilationContext)(),{track:u}=(0,c.useTelemetry)("ExceptionTable"),p=(0,s.useMemo)(()=>e.map(e=>({...e,description:(0,l.sanitizeString)(e.description)})),[e]);return("config"===o.mode&&(o.config.widgets||(o.config.widgets={}),o.config.widgets["exception-table"]={id:"exception-table",type:"exception-table",props:{showSeverity:n,showCategory:i}}),"ui"===o.mode)?(0,a.jsx)("div",{className:r,"data-widget":"exception-table",children:(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"ID"}),i&&(0,a.jsx)("th",{children:"Category"}),n&&(0,a.jsx)("th",{children:"Severity"}),(0,a.jsx)("th",{children:"Description"}),(0,a.jsx)("th",{children:"Status"}),t&&(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:p.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.id}),i&&(0,a.jsx)("td",{children:e.category}),n&&(0,a.jsx)("td",{children:(0,a.jsx)("span",{"data-severity":e.severity,children:e.severity})}),(0,a.jsx)("td",{children:e.description}),(0,a.jsx)("td",{children:e.resolutionStatus}),t&&(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:()=>{u("exception.resolved",{exceptionId:e.id}),t(e)},children:"Resolve"})})]},e.id))})]})}):null})},778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportButton=function({data:e,filename:t="reconciliation-export",format:r="csv",onExport:c,className:u,disabled:p=!1}){let h=(0,o.useCompilationContext)(),{track:m}=(0,a.useTelemetry)("ExportButton"),{auditLog:f}=(0,s.useSecurity)(),g=(0,i.useCallback)(()=>{if(!p&&0!==e.length){m("export.started",{format:r,recordCount:e.length}),f("export.generated",`Export ${r}`,"success",{format:r,recordCount:e.length});try{"csv"===r?l(e,t):"json"===r?d(JSON.stringify(e,null,2),`${t}.json`,"application/json"):"xlsx"===r&&(console.warn("XLSX export requires xlsx library. Falling back to CSV."),l(e,t)),c?.(r,e),m("export.completed",{format:r,recordCount:e.length})}catch(e){m("export.failed",{format:r,error:e instanceof Error?e.message:"Unknown error"}),f("export.generated",`Export ${r}`,"failure",{format:r,error:e instanceof Error?e.message:"Unknown"})}}},[e,t,r,c,p,m,f]);return"config"===h.mode?(h.config.widgets||(h.config.widgets={}),h.config.widgets["export-button"]={id:"export-button",type:"filter-bar",props:{format:r}},null):(0,n.jsxs)("button",{onClick:g,disabled:p||0===e.length,className:u,"data-widget":"export-button",style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"1px solid #d1d5db",backgroundColor:p?"#f3f4f6":"white",cursor:p?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500"},children:["Export ",r.toUpperCase()]})};let n=r(3227),i=r(3677),o=r(2477),a=r(2102),s=r(8043);function l(e,t){if(0===e.length)return;let r=Object.keys(e[0]),n=e.map(e=>r.map(t=>{let r=e[t];if(null==r)return"";let n=String(r).replace(/"/g,'""');return`"${n}"`}));d([r.map(e=>`"${e}"`).join(","),...n.map(e=>e.join(","))].join("\n"),`${t}.csv`,"text/csv")}function d(e,t,r){let n=new Blob([e],{type:r}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}},1976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBar=function({onFilterChange:e,className:t,showProviderFilter:r=!0,showStatusFilter:s=!0,showDateRangeFilter:l=!0,showAmountRangeFilter:d=!0}){let c=(0,o.useCompilationContext)(),{track:u}=(0,a.useTelemetry)("FilterBar"),[p,h]=(0,i.useState)({}),m=(0,i.useCallback)(t=>{h(t),u("filter.changed",{filters:t}),e?.(t)},[e,u]);return"config"===c.mode?(c.config.widgets||(c.config.widgets={}),c.config.widgets["filter-bar"]={id:"filter-bar",type:"filter-bar",props:{showProviderFilter:r,showStatusFilter:s,showDateRangeFilter:l,showAmountRangeFilter:d}},null):(0,n.jsx)("div",{className:t,"data-widget":"filter-bar",children:(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[r&&(0,n.jsxs)("select",{value:p.provider?.[0]||"",onChange:e=>{let t=e.target.value?[e.target.value]:void 0;m({...p,provider:t??void 0})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"},children:[(0,n.jsx)("option",{value:"",children:"All Providers"}),(0,n.jsx)("option",{value:"stripe",children:"Stripe"}),(0,n.jsx)("option",{value:"paypal",children:"PayPal"}),(0,n.jsx)("option",{value:"square",children:"Square"})]}),s&&(0,n.jsxs)("select",{value:p.status?.[0]||"",onChange:e=>{let t=e.target.value?[e.target.value]:void 0;m({...p,status:t??void 0})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"},children:[(0,n.jsx)("option",{value:"",children:"All Statuses"}),(0,n.jsx)("option",{value:"pending",children:"Pending"}),(0,n.jsx)("option",{value:"succeeded",children:"Succeeded"}),(0,n.jsx)("option",{value:"failed",children:"Failed"})]}),l&&(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{type:"date",value:p.dateRange?.start||"",onChange:e=>{m({...p,dateRange:{...p.dateRange,start:e.target.value}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"}}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"date",value:p.dateRange?.end||"",onChange:e=>{m({...p,dateRange:{...p.dateRange,end:e.target.value}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db"}})]}),d&&(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,n.jsx)("input",{type:"number",placeholder:"Min",value:p.amountRange?.min||"",onChange:e=>{let t=e.target.value?parseFloat(e.target.value):void 0;m({...p,amountRange:{...p.amountRange,min:t??void 0}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}}),(0,n.jsx)("span",{children:"to"}),(0,n.jsx)("input",{type:"number",placeholder:"Max",value:p.amountRange?.max||"",onChange:e=>{let t=e.target.value?parseFloat(e.target.value):void 0;m({...p,amountRange:{...p.amountRange,max:t??void 0}})},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #d1d5db",width:"100px"}})]}),(0,n.jsx)("button",{onClick:()=>{m({}),u("filter.cleared")},style:{padding:"0.5rem 1rem",borderRadius:"4px",border:"1px solid #d1d5db",backgroundColor:"white",cursor:"pointer"},children:"Clear Filters"})]})})};let n=r(3227),i=r(3677),o=r(2477),a=r(2102)},837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatchRule=function({id:e,name:t,field:r,type:o,tolerance:a,priority:s,enabled:l=!0}){let d=(0,i.useCompilationContext)();if("config"===d.mode){d.config.rulesets&&0!==d.config.rulesets.length||(d.config.rulesets=[{id:"default-ruleset",name:"Default Rules",rules:[],priority:"exact-first"}]);let n=d.config.rulesets[d.config.rulesets.length-1];if(!n)return null;let i={id:e,name:t,field:r,type:o,...a?{tolerance:a}:{},...void 0!==s?{priority:s}:{},enabled:l};n.rules.push(i)}return"ui"===d.mode?(0,n.jsxs)("div",{"data-rule-id":e,"data-rule-field":r,"data-rule-type":o,children:[(0,n.jsx)("strong",{children:t}),(0,n.jsxs)("span",{children:["Field: ",r]}),(0,n.jsxs)("span",{children:["Type: ",o]}),a&&(0,n.jsxs)("span",{children:["Tolerance: ",JSON.stringify(a)]})]}):null};let n=r(3227),i=r(2477)},5217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricCard=function({title:e,value:t,subtitle:r,trend:o,className:a}){let s=(0,i.useCompilationContext)();if("config"===s.mode){let t=`metric-${e.toLowerCase().replace(/\s+/g,"-")}`;s.config.widgets||(s.config.widgets={}),s.config.widgets[t]={id:t,type:"metric-card",title:e,props:{subtitle:r,trend:o}}}return"ui"===s.mode?(0,n.jsx)("div",{className:a,"data-widget":"metric-card",children:(0,n.jsxs)("div",{"data-metric-title":e,children:[(0,n.jsx)("h3",{children:e}),(0,n.jsx)("div",{"data-metric-value":t,"data-trend":o,children:t}),r&&(0,n.jsx)("div",{"data-metric-subtitle":!0,children:r})]})}):null};let n=r(3227),i=r(2477)},5675:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileDashboard=function({transactions:e,exceptions:t,onTransactionSelect:r,onExceptionResolve:u,className:p}){let{track:h}=(0,c.useTelemetry)("MobileDashboard"),[m,f]=(0,i.useState)("transactions"),[g,b]=(0,i.useState)(""),y=(0,i.useMemo)(()=>{if(!g)return e;let t=g.toLowerCase();return e.filter(e=>e.id.toLowerCase().includes(t)||e.provider.toLowerCase().includes(t)||e.providerTransactionId.toLowerCase().includes(t))},[e,g]);return(0,n.jsx)(o.ReconciliationDashboard,{...void 0!==p?{className:p}:{},children:(0,n.jsxs)("div",{style:{padding:"1rem",maxWidth:"100%",backgroundColor:"#fff"},"data-mobile-dashboard":!0,children:[(0,n.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:700,marginBottom:"0.5rem",color:"#111827"},children:"Reconciliation"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.75rem",overflowX:"auto",paddingBottom:"0.5rem",WebkitOverflowScrolling:"touch"},children:[(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Transactions",value:e.length,subtitle:"Total"})}),(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Match Rate",value:`${Math.round((e.length-t.length)/Math.max(e.length,1)*100)}%`,subtitle:"Success"})}),(0,n.jsx)("div",{style:{minWidth:"140px",flexShrink:0},children:(0,n.jsx)(l.MetricCard,{title:"Exceptions",value:t.length,subtitle:"Review"})})]})]}),(0,n.jsx)("div",{style:{marginBottom:"1rem"},children:(0,n.jsx)(d.SearchBar,{onSearch:e=>{b(e),h("search.executed",{query:e,platform:"mobile"})},placeholder:"Search transactions...",debounceMs:300})}),(0,n.jsxs)("div",{style:{display:"flex",borderBottom:"2px solid #e5e7eb",marginBottom:"1rem"},role:"tablist","aria-label":"Dashboard tabs",children:[(0,n.jsxs)("button",{onClick:()=>{f("transactions"),h("tab.switched",{tab:"transactions"})},role:"tab","aria-selected":"transactions"===m,"aria-controls":"transactions-panel",style:{flex:1,padding:"0.75rem",border:"none",backgroundColor:"transparent",borderBottom:"transactions"===m?"2px solid #3b82f6":"none",color:"transactions"===m?"#3b82f6":"#6b7280",fontWeight:"transactions"===m?600:400,fontSize:"0.875rem",cursor:"pointer",touchAction:"manipulation"},children:["Transactions (",e.length,")"]}),(0,n.jsxs)("button",{onClick:()=>{f("exceptions"),h("tab.switched",{tab:"exceptions"})},role:"tab","aria-selected":"exceptions"===m,"aria-controls":"exceptions-panel",style:{flex:1,padding:"0.75rem",border:"none",backgroundColor:"transparent",borderBottom:"exceptions"===m?"2px solid #3b82f6":"none",color:"exceptions"===m?"#3b82f6":"#6b7280",fontWeight:"exceptions"===m?600:400,fontSize:"0.875rem",cursor:"pointer",touchAction:"manipulation"},children:["Exceptions (",t.length,")"]})]}),(0,n.jsx)("div",{role:"tabpanel",id:"transactions-panel","aria-hidden":"transactions"!==m,style:{display:"transactions"===m?"block":"none"},children:y.length>0?(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(a.TransactionTable,{transactions:y,...void 0!==r?{onSelect:r}:{}})}):(0,n.jsx)("div",{style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:(0,n.jsx)("p",{children:"No transactions found"})})}),(0,n.jsx)("div",{role:"tabpanel",id:"exceptions-panel","aria-hidden":"exceptions"!==m,style:{display:"exceptions"===m?"block":"none"},children:t.length>0?(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(s.ExceptionTable,{exceptions:t,...void 0!==u?{onResolve:u}:{}})}):(0,n.jsx)("div",{style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:(0,n.jsx)("p",{children:"No exceptions found"})})})]})})};let n=r(3227),i=r(3677),o=r(6892),a=r(8069),s=r(7838),l=r(5217),d=r(4193),c=r(2102)},6892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReconciliationDashboard=function({children:e,mode:t,config:r,className:o}){return(0,n.jsx)(i.CompilationProvider,{...void 0!==t?{mode:t}:{},...void 0!==r?{config:r}:{},children:(0,n.jsx)("div",{className:o,"data-reconciliation-dashboard":!0,children:e})})};let n=r(3227),i=r(2477)},7649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=function({id:e,name:t,priority:r="exact-first",conflictResolution:o="manual-review",children:a}){let s=(0,i.useCompilationContext)();return"config"===s.mode&&(s.config.rulesets||(s.config.rulesets=[]),s.config.rulesets.push({id:e,name:t,rules:[],priority:r,conflictResolution:o})),(0,n.jsx)(n.Fragment,{children:a})};let n=r(3227),i=r(2477)},4193:(e,t,r)=>{"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},o=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var o=e(t),a=0;a<o.length;a++)"default"!==o[a]&&n(r,t,o[a]);return i(r,t),r}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBar=function({onSearch:e,placeholder:t="Search transactions...",className:r,debounceMs:n=300,searchFields:i=["id","providerTransactionId","referenceId"]}){let o=(0,l.useCompilationContext)(),{track:c}=(0,d.useTelemetry)("SearchBar"),[u,p]=(0,s.useState)(""),[h,m]=(0,s.useState)("");s.default.useEffect(()=>{let e=setTimeout(()=>{m(u)},n);return()=>clearTimeout(e)},[u,n]),s.default.useEffect(()=>{h!==u&&(c("search.executed",{query:h,length:h.length}),e?.(h))},[h,e,c]);let f=(0,s.useCallback)(e=>{let t=e.target.value;p(t),c("search.changed",{query:t})},[c]),g=(0,s.useCallback)(()=>{p(""),m(""),c("search.cleared"),e?.("")},[e,c]);return"config"===o.mode?(o.config.widgets||(o.config.widgets={}),o.config.widgets["search-bar"]={id:"search-bar",type:"filter-bar",props:{placeholder:t,debounceMs:n,searchFields:i}},null):(0,a.jsxs)("div",{className:r,"data-widget":"search-bar",style:{position:"relative"},children:[(0,a.jsx)("input",{type:"text",value:u,onChange:f,placeholder:t,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 1rem",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"1rem"}}),u&&(0,a.jsx)("button",{onClick:g,style:{position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem",color:"#6b7280"},"aria-label":"Clear search",children:"\xd7"})]})};let a=r(3227),s=o(r(3677)),l=r(2477),d=r(2102)},8069:(e,t,r)=>{"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},i=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},o=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var o=e(t),a=0;a<o.length;a++)"default"!==o[a]&&n(r,t,o[a]);return i(r,t),r}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionTable=void 0;let a=r(3227),s=o(r(3677)),l=r(2477),d=r(2102),c=r(7783);t.TransactionTable=s.default.memo(function({transactions:e,onSelect:t,className:r,showProvider:n=!0,showStatus:i=!0}){let o=(0,l.useCompilationContext)(),{track:u}=(0,d.useTelemetry)("TransactionTable"),p=(0,s.useMemo)(()=>e.map(e=>({...e,id:(0,c.sanitizeString)(e.id),provider:(0,c.sanitizeString)(e.provider),providerTransactionId:(0,c.sanitizeString)(e.providerTransactionId),...e.referenceId?{referenceId:(0,c.sanitizeString)(e.referenceId)}:{}})),[e]);return("config"===o.mode&&(o.config.widgets||(o.config.widgets={}),o.config.widgets["transaction-table"]={id:"transaction-table",type:"transaction-table",props:{showProvider:n,showStatus:i}}),"ui"===o.mode)?(0,a.jsxs)("div",{className:r,"data-widget":"transaction-table",children:[(0,a.jsx)("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:(0,a.jsxs)("table",{role:"table","aria-label":"Reconciliation transactions",style:{width:"100%",borderCollapse:"collapse"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"ID"}),n&&(0,a.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Provider"}),(0,a.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Amount"}),(0,a.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Currency"}),(0,a.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Date"}),i&&(0,a.jsx)("th",{scope:"col",style:{padding:"0.75rem",textAlign:"left",fontWeight:600,borderBottom:"2px solid #e5e7eb",backgroundColor:"#f9fafb"},children:"Status"})]})}),(0,a.jsx)("tbody",{children:p.map((e,r)=>(0,a.jsxs)("tr",{onClick:()=>{u("transaction.selected",{transactionId:e.id}),t?.(e)},onKeyDown:r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),u("transaction.selected",{transactionId:e.id}),t?.(e))},role:t?"button":"row",tabIndex:t?0:-1,"aria-label":`Transaction ${e.id}, ${e.amount.value} ${e.amount.currency}`,style:{cursor:t?"pointer":"default",backgroundColor:r%2==0?"white":"#f9fafb",borderBottom:"1px solid #e5e7eb",transition:"background-color 0.15s ease"},onMouseEnter:e=>{t&&(e.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=r%2==0?"white":"#f9fafb"},onFocus:e=>{t&&(e.currentTarget.style.outline="2px solid #3b82f6",e.currentTarget.style.outlineOffset="-2px")},onBlur:e=>{e.currentTarget.style.outline="none"},children:[(0,a.jsx)("td",{style:{padding:"0.75rem"},children:e.id}),n&&(0,a.jsx)("td",{style:{padding:"0.75rem"},children:e.provider}),(0,a.jsx)("td",{style:{padding:"0.75rem"},children:e.amount.value.toFixed(2)}),(0,a.jsx)("td",{style:{padding:"0.75rem"},children:e.currency}),(0,a.jsx)("td",{style:{padding:"0.75rem"},children:(0,a.jsx)("time",{dateTime:e.date,children:new Date(e.date).toLocaleDateString()})}),i&&(0,a.jsx)("td",{style:{padding:"0.75rem"},children:(0,a.jsx)("span",{role:"status","aria-label":`Status: ${e.status}`,children:e.status})})]},e.id))})]})}),0===p.length&&(0,a.jsx)("div",{role:"status","aria-live":"polite",style:{padding:"3rem 1rem",textAlign:"center",color:"#6b7280"},children:"No transactions found"})]}):null})},3357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradePrompt=function({feature:e,featureName:t,compact:r=!1,onUpgrade:o}){let a=()=>{o?o():window.open("https://settler.dev/pricing","_blank","noopener,noreferrer")};return r?(0,n.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,n.jsxs)("span",{style:{color:"#92400e"},children:[t||e," requires Settler Commercial."," "]}),(0,n.jsx)("button",{onClick:a,style:{backgroundColor:"transparent",border:"none",color:"#92400e",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Upgrade â†’"})]}):(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",border:"2px dashed #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,n.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDD12"}),(0,n.jsxs)("h3",{style:{marginTop:0,marginBottom:"0.5rem",color:"#111827"},children:[t||e," is a Commercial Feature"]}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem",maxWidth:"500px",margin:"0 auto 1.5rem"},children:(0,i.getUpgradeMessage)(e)}),(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,n.jsx)("button",{onClick:a,style:{padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontWeight:600,cursor:"pointer",fontSize:"1rem"},children:"View Pricing"}),(0,n.jsx)("a",{href:"https://settler.dev/docs/commercial-features",target:"_blank",rel:"noopener noreferrer",style:{padding:"0.75rem 1.5rem",backgroundColor:"white",color:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",textDecoration:"none",fontWeight:600,fontSize:"1rem"},children:"Learn More"})]})]})};let n=r(3227),i=r(3979)},358:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualizedTable=function({transactions:e,height:t=400,rowHeight:r=50,onSelect:s,className:l}){let d=(0,a.useCompilationContext)(),{hasAccess:c,UpgradePrompt:u}=(0,i.useFeatureGate)(i.FEATURE_FLAGS.VIRTUALIZATION),[p,h]=(0,o.useState)(0);if(!c)return(0,n.jsx)(u,{});let m=(0,o.useMemo)(()=>{let n=Math.floor(p/r),i=Math.min(n+Math.ceil(t/r)+1,e.length);return{startIndex:n,endIndex:i}},[p,r,t,e.length]),f=(0,o.useMemo)(()=>e.slice(m.startIndex,m.endIndex),[e,m]),g=e.length*r,b=m.startIndex*r,y=(0,o.useCallback)(e=>{h(e.currentTarget.scrollTop)},[]);return"config"===d.mode?(d.config.widgets||(d.config.widgets={}),d.config.widgets["virtualized-table"]={id:"virtualized-table",type:"transaction-table",props:{height:t,rowHeight:r}},null):(0,n.jsx)("div",{className:l,"data-widget":"virtualized-table",style:{height:t,overflow:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},onScroll:y,children:(0,n.jsx)("div",{style:{height:g,position:"relative"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{position:"sticky",top:0,backgroundColor:"#f9fafb",zIndex:10},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"ID"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Provider"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Amount"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Date"}),(0,n.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #e5e7eb"},children:"Status"})]})}),(0,n.jsx)("tbody",{style:{transform:`translateY(${b}px)`},children:f.map((e,t)=>(0,n.jsxs)("tr",{onClick:()=>s?.(e),style:{cursor:s?"pointer":"default",backgroundColor:t%2==0?"white":"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.id}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.provider}),(0,n.jsxs)("td",{style:{padding:"0.75rem"},children:[e.amount.value.toFixed(2)," ",e.amount.currency]}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:new Date(e.date).toLocaleDateString()}),(0,n.jsx)("td",{style:{padding:"0.75rem"},children:e.status})]},e.id))})]})})})};let n=r(3227),i=r(3979),o=r(3677),a=r(2477)},2477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationProvider=function({mode:e="ui",config:t={},children:r}){let i={mode:e,config:t,widgetRegistry:new Map};return(0,n.jsx)(o.Provider,{value:i,children:r})},t.useCompilationContext=function(){return(0,i.useContext)(o)||{mode:"ui",config:{},widgetRegistry:new Map}};let n=r(3227),i=r(3677),o=(0,i.createContext)(null)},8043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAuditLogHandler=function(e){a=e},t.useSecurity=function(){let e=(0,o.useCompilationContext)().securityContext,t=(0,i.useCallback)((t,r,i,o)=>{if(!(0,n.hasFeature)(n.FEATURE_FLAGS.AUDIT_LOGGING)){console.warn("Audit logging requires Settler Commercial subscription");return}if(!a)return;let s={id:`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),event:t,...e?.userId?{userId:e.userId}:{},...e?.sessionId?{sessionId:e.sessionId}:{},...e?.ipAddress?{ipAddress:e.ipAddress}:{},...e?.userAgent?{userAgent:e.userAgent}:{},action:r,result:i,...o?{metadata:o}:{}};a(s)},[e]),r=(0,i.useCallback)(t=>!!e?.permissions&&e.permissions.includes(t),[e]),s=(0,i.useCallback)(t=>!!e?.roles&&e.roles.includes(t),[e]);return{securityContext:e,auditLog:t,hasPermission:r,hasRole:s}};let n=r(3979),i=r(3677),o=r(2477),a=null},2102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setTelemetryProvider=function(e){o=e},t.setTelemetryConfig=function(e){a={...a,...e}},t.useTelemetry=function(e){(0,n.requireFeature)(n.FEATURE_FLAGS.TELEMETRY,"Telemetry");let t=(0,i.useRef)(Date.now()),r=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(a.enabled&&a.trackPerformance)return t.current=Date.now(),()=>{let r=Date.now()-t.current;e&&r>0&&c({renderTime:r},e)}},[e]);let l=(0,i.useCallback)((t,r)=>{if(!a.enabled||!o||Math.random()>(a.sampleRate||1))return;let n={id:`evt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),type:"component.interaction",name:t,...r?{properties:a.scrubPII?s(r):r}:{},...e?{context:{component:e}}:{}};o.track(n)},[e]),d=(0,i.useCallback)((t,r)=>{if(!a.enabled||!a.trackErrors||!o)return;let n={error:t,...e?{component:e}:{},...r?{context:a.scrubPII?s(r):r}:{},timestamp:new Date().toISOString()};o.trackError(n)},[e]),c=(0,i.useCallback)((t,r)=>{if(!a.enabled||!a.trackPerformance||!o)return;let n={id:`perf_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),type:"performance",name:"component.performance",measurements:t,...r||e?{context:{component:r||e}}:{}};o.track(n)},[e]),u=(0,i.useCallback)(()=>{r.current=Date.now()},[]),p=(0,i.useCallback)(t=>{if(null===r.current)return;let n=Date.now()-r.current;c({interactionLatency:n},e),l(t,{latency:n}),r.current=null},[e,l,c]);return{track:l,trackError:d,trackPerformance:c,startInteraction:u,endInteraction:p}};let n=r(3979),i=r(3677),o=null,a={enabled:!1,sampleRate:1,batchSize:10,flushInterval:5e3,trackPerformance:!0,trackErrors:!0,trackUsers:!1,scrubPII:!0};function s(e){if(!e)return;let t={},r=[/email/i,/phone/i,/ssn/i,/credit.?card/i,/card.?number/i,/cvv/i,/password/i,/token/i,/api.?key/i];for(let[n,i]of Object.entries(e))r.some(e=>e.test(n))&&"string"==typeof i?t[n]="[REDACTED]":t[n]=i;return t}},6934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useValidation=function(e){return{validateTransaction:(0,n.useMemo)(()=>t=>{let r=[];if((0,i.validateTransactionId)(t.id)||r.push({field:"id",code:"INVALID_ID",message:"Transaction ID is invalid"}),t.provider&&"string"==typeof t.provider?e?.transaction?.allowedProviders&&!e.transaction.allowedProviders.includes(t.provider)&&r.push({field:"provider",code:"INVALID_PROVIDER",message:`Provider must be one of: ${e.transaction.allowedProviders.join(", ")}`}):r.push({field:"provider",code:"REQUIRED_FIELD",message:"Provider is required"}),(0,i.isValidMoney)(t.amount)?(e?.transaction?.maxAmount&&t.amount.value>e.transaction.maxAmount&&r.push({field:"amount",code:"AMOUNT_TOO_LARGE",message:`Amount exceeds maximum of ${e.transaction.maxAmount}`}),e?.transaction?.minAmount&&t.amount.value<e.transaction.minAmount&&r.push({field:"amount",code:"AMOUNT_TOO_SMALL",message:`Amount is below minimum of ${e.transaction.minAmount}`})):r.push({field:"amount",code:"INVALID_AMOUNT",message:"Amount is invalid"}),(0,i.isValidCurrency)(t.currency)?e?.transaction?.allowedCurrencies&&!e.transaction.allowedCurrencies.includes(t.currency)&&r.push({field:"currency",code:"INVALID_CURRENCY",message:`Currency must be one of: ${e.transaction.allowedCurrencies.join(", ")}`}):r.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be a valid ISO 4217 code"}),(0,i.isValidISODate)(t.date)){if(e?.transaction?.dateRange){let n=new Date(t.date);e.transaction.dateRange.min&&n<new Date(e.transaction.dateRange.min)&&r.push({field:"date",code:"DATE_TOO_EARLY",message:"Date is before minimum allowed date"}),e.transaction.dateRange.max&&n>new Date(e.transaction.dateRange.max)&&r.push({field:"date",code:"DATE_TOO_LATE",message:"Date is after maximum allowed date"})}}else r.push({field:"date",code:"INVALID_DATE",message:"Date must be a valid ISO 8601 date string"});let n=["pending","succeeded","failed","refunded","disputed"];return n.includes(t.status)||r.push({field:"status",code:"INVALID_STATUS",message:`Status must be one of: ${n.join(", ")}`}),t.metadata&&t.metadata,{valid:0===r.length,errors:r,warnings:[]}},[e]),validateSettlement:(0,n.useMemo)(()=>e=>{let t=[];return(0,i.validateTransactionId)(e.id)||t.push({field:"id",code:"INVALID_ID",message:"Settlement ID is invalid"}),(0,i.isValidMoney)(e.amount)||t.push({field:"amount",code:"INVALID_AMOUNT",message:"Amount is invalid"}),(0,i.isValidCurrency)(e.currency)||t.push({field:"currency",code:"INVALID_CURRENCY",message:"Currency must be a valid ISO 4217 code"}),(0,i.isValidISODate)(e.settlementDate)||t.push({field:"settlementDate",code:"INVALID_DATE",message:"Settlement date must be a valid ISO 8601 date string"}),{valid:0===t.length,errors:t,warnings:[]}},[e]),validateException:(0,n.useMemo)(()=>t=>{let r=[];if(t.id&&"string"==typeof t.id||r.push({field:"id",code:"REQUIRED_FIELD",message:"Exception ID is required"}),t.description&&"string"==typeof t.description){let n=e?.exception?.descriptionMaxLength||1e3;t.description.length>n&&r.push({field:"description",code:"DESCRIPTION_TOO_LONG",message:`Description exceeds maximum length of ${n} characters`})}else r.push({field:"description",code:"REQUIRED_FIELD",message:"Description is required"});return{valid:0===r.length,errors:r,warnings:[]}},[e])}};let n=r(3677),i=r(7783)},3095:(e,t,r)=>{"use strict";t.A1=t.m_=t.i9=t.Xc=t.yh=t.yg=void 0,t.Bo=void 0;var n=r(6892);Object.defineProperty(t,"yg",{enumerable:!0,get:function(){return n.ReconciliationDashboard}});var i=r(8069);Object.defineProperty(t,"yh",{enumerable:!0,get:function(){return i.TransactionTable}});var o=r(7838);Object.defineProperty(t,"Xc",{enumerable:!0,get:function(){return o.ExceptionTable}});var a=r(5217);Object.defineProperty(t,"i9",{enumerable:!0,get:function(){return a.MetricCard}});var s=r(7649);Object.defineProperty(t,"m_",{enumerable:!0,get:function(){return s.RuleSet}});var l=r(837);Object.defineProperty(t,"A1",{enumerable:!0,get:function(){return l.MatchRule}}),r(3091),r(1976),r(4193),r(778),r(358),r(6934),r(2102),r(8043),r(2477),r(1502),r(5081),r(8543),r(2832),r(9151),r(9039),r(4145),r(5675),r(3979),r(3357);var d=r(3856);Object.defineProperty(t,"Bo",{enumerable:!0,get:function(){return d.compileToJSON}})},3979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FEATURE_FLAGS=void 0,t.setLicense=function(e){i=e,e.expiresAt&&new Date(e.expiresAt)<new Date&&(console.warn("License has expired. Falling back to OSS tier."),i={tier:"oss",features:new Set([t.FEATURE_FLAGS.CORE_PROTOCOL,t.FEATURE_FLAGS.BASIC_COMPONENTS])})},t.getLicense=function(){return i},t.hasFeature=o,t.hasTier=a,t.requireFeature=function(e,t){if(!o(e)){let r=t||e;throw Error(`${r} is a commercial feature. Upgrade to Settler Commercial to access this feature. Visit https://settler.dev/pricing to learn more.`)}},t.requireTier=function(e){if(!a(e))throw Error(`This feature requires ${{oss:"OSS",commercial:"Commercial",enterprise:"Enterprise"}[e]} tier. Visit https://settler.dev/pricing to upgrade.`)},t.getUpgradeMessage=s,t.useFeature=function(e){return o(e)},t.useFeatureGate=function(e,t){let r=o(e);return{hasAccess:r,UpgradePrompt:t?()=>r?null:(0,n.jsx)(n.Fragment,{children:t}):()=>r?null:(0,n.jsxs)("div",{style:{padding:"2rem",textAlign:"center",border:"2px dashed #e5e7eb",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,n.jsx)("h3",{style:{marginTop:0,color:"#111827"},children:"Upgrade Required"}),(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1rem"},children:s(e)}),(0,n.jsx)("a",{href:"https://settler.dev/pricing",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"6px",fontWeight:600},children:"View Pricing"})]})}};let n=r(3227),i={tier:"oss",features:new Set(["core","basic-components","validation","security-basic"])};function o(e){return i.features.has(e)}function a(e){let t={oss:0,commercial:1,enterprise:2};return t[i.tier]>=t[e]}function s(e){return`Upgrade to Settler Commercial to unlock ${e}. Visit https://settler.dev/pricing`}t.FEATURE_FLAGS={CORE_PROTOCOL:"core",BASIC_COMPONENTS:"basic-components",VALIDATION:"validation",SECURITY_BASIC:"security-basic",MOBILE_BASIC:"mobile-basic",ACCESSIBILITY:"accessibility",MCP_INTEGRATION:"mcp-integration",SHOPIFY_INTEGRATION:"shopify-integration",STRIPE_INTEGRATION:"stripe-integration",WEBHOOK_MANAGER:"webhook-manager",ADVANCED_SECURITY:"advanced-security",AUDIT_LOGGING:"audit-logging",TELEMETRY:"telemetry",EXPORT_ADVANCED:"export-advanced",VIRTUALIZATION:"virtualization",PERFORMANCE_MONITORING:"performance-monitoring",CUSTOM_THEMES:"custom-themes",WHITE_LABEL:"white-label",SSO:"sso",RBAC:"rbac",CUSTOM_INTEGRATIONS:"custom-integrations",PRIORITY_SUPPORT:"priority-support",SLA:"sla",DEDICATED_INSTANCE:"dedicated-instance"}},1502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFilteredTransactions=function(e,t){return(0,n.useMemo)(()=>e.filter(e=>{if(t.provider&&t.provider.length>0&&!t.provider.includes(e.provider)||t.status&&t.status.length>0&&!t.status.includes(e.status))return!1;if(t.dateRange){let r=new Date(e.date);if(t.dateRange.start&&r<new Date(t.dateRange.start)||t.dateRange.end&&r>new Date(t.dateRange.end))return!1}if(t.amountRange&&(void 0!==t.amountRange.min&&e.amount.value<t.amountRange.min||void 0!==t.amountRange.max&&e.amount.value>t.amountRange.max))return!1;if(t.search){let r=t.search.toLowerCase();if(![e.id,e.providerTransactionId,e.referenceId,e.provider,e.status].filter(Boolean).join(" ").toLowerCase().includes(r))return!1}return!0}),[e,t])},t.useSortedTransactions=function(e,t,r="asc"){return(0,n.useMemo)(()=>t?[...e].sort((e,n)=>{let i=e[t],o=n[t];return null==i?1:null==o?-1:"string"==typeof i&&"string"==typeof o?"asc"===r?i.localeCompare(o):o.localeCompare(i):"number"==typeof i&&"number"==typeof o?"asc"===r?i-o:o-i:0}):e,[e,t,r])},t.useDebounce=function(e,t){let[r,i]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(r)}},[e,t]),r};let n=r(3677)},8543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useBreakpoint=function(e=i){let[t,r]=(0,n.useState)("xs");return(0,n.useEffect)(()=>{let t=()=>{let t=window.innerWidth;t>=e["2xl"]?r("2xl"):t>=e.xl?r("xl"):t>=e.lg?r("lg"):t>=e.md?r("md"):t>=e.sm?r("sm"):r("xs")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t},t.useMediaQuery=o,t.useIsMobile=function(){return o("(max-width: 768px)")},t.useIsTablet=function(){return o("(min-width: 769px) and (max-width: 1023px)")},t.useIsDesktop=function(){return o("(min-width: 1024px)")},t.getResponsiveColumns=function(e){return({xs:1,sm:2,md:3,lg:4,xl:4,"2xl":5})[e]};let n=r(3677),i={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function o(e){let[t,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=window.matchMedia(e);r(t.matches);let n=e=>{r(e.matches)};return t.addEventListener("change",n),()=>t.removeEventListener("change",n)},[e]),t}},5081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMockTransaction=i,t.createMockSettlement=function(e){return{id:`st_${Math.random().toString(36).substr(2,9)}`,provider:"stripe",providerSettlementId:`set_${Math.random().toString(36).substr(2,9)}`,amount:{value:100,currency:"USD"},currency:"USD",settlementDate:new Date().toISOString(),status:"completed",...e}},t.createMockException=function(e){return{id:`exc_${Math.random().toString(36).substr(2,9)}`,category:"amount_mismatch",severity:"high",description:"Transaction amount does not match settlement",resolutionStatus:"open",createdAt:new Date().toISOString(),...e}},t.createMockTransactions=function(e){return Array.from({length:e},(e,t)=>i({id:`tx_${t}`,amount:{value:(t+1)*10,currency:"USD"}}))},t.TestWrapper=function({children:e,mode:t="ui",config:i={}}){let{CompilationProvider:o}=r(2477);return(0,n.jsx)(o,{mode:t,config:i,children:e})},t.waitFor=function(e){return new Promise(t=>setTimeout(t,e))},t.createMockTelemetryProvider=function(){let e=[],t=[];return{track:t=>{e.push(t)},trackError:e=>{t.push(e)},trackPerformance:()=>{},flush:async()=>{},setUser:()=>{},setContext:()=>{},getEvents:()=>e,getErrors:()=>t,clear:()=>{e.length=0,t.length=0}}};let n=r(3227);function i(e){return{id:`tx_${Math.random().toString(36).substr(2,9)}`,provider:"stripe",providerTransactionId:`ch_${Math.random().toString(36).substr(2,9)}`,amount:{value:100,currency:"USD"},currency:"USD",date:new Date().toISOString(),status:"succeeded",...e}}},2832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookManager=void 0,t.createWebhookManager=a,t.createShopifyWebhookAdapter=function(e){let t=a(e);return{handleShopifyWebhook:async e=>{let r={"orders/create":"transaction.created","orders/paid":"transaction.updated","payouts/create":"settlement.created"}[e.event]||"transaction.created";await t.emit(r,e.data)},manager:t}},t.createStripeWebhookAdapter=function(e){let t=a(e);return{handleStripeWebhook:async e=>{let r={"charge.succeeded":"transaction.created","charge.refunded":"transaction.updated","payout.paid":"settlement.created"}[e.type]||"transaction.created";await t.emit(r,e.data.object)},manager:t}};let n=r(7783),i=r(3979);class o{constructor(e){this.handlers=new Map,(0,i.requireFeature)(i.FEATURE_FLAGS.WEBHOOK_MANAGER,"Webhook Manager"),this.secret=e||(0,n.generateSecureId)("webhook")}on(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{let r=this.handlers.get(e);if(r){let e=r.indexOf(t);e>-1&&r.splice(e,1)}}}async emit(e,t){let r=this.handlers.get(e)||[],i={id:(0,n.generateSecureId)("wh"),event:e,timestamp:new Date().toISOString(),data:this.sanitizeData(t)};this.secret&&(i.signature=await this.signPayload(i)),await Promise.all(r.map(e=>e(i)))}async verifySignature(e,t){return!!this.secret&&t===await this.signPayload(e)}sanitizeData(e){if("string"==typeof e)return(0,n.sanitizeString)(e);if(Array.isArray(e))return e.map(e=>this.sanitizeData(e));if(e&&"object"==typeof e){let t={};for(let[r,i]of Object.entries(e))t[(0,n.sanitizeString)(r)]=this.sanitizeData(i);return t}return e}async signPayload(e){let t=`${e.id}:${e.event}:${e.timestamp}`,r=new TextEncoder().encode(t+this.secret);return"undefined"!=typeof crypto&&crypto.subtle?Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join(""):btoa(t+this.secret).substring(0,64)}}function a(e){return new o(e)}t.WebhookManager=o},5337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettlerClient=void 0;let n=r(3315),i=r(7909),o=r(6800),a=r(6658),s=r(4027),l=r(8284),d=r(9140),c=r(1833),u=r(5386);class p{constructor(e){if(!e.apiKey)throw Error("API key is required");this.apiKey=e.apiKey,this.baseUrl=e.baseUrl||"https://api.settler.io",this.timeout=e.timeout||3e4,this.retryConfig=e.retry||{},this.deduplicateRequests=!1!==e.deduplicateRequests,e.tokenRefresh&&(this.tokenManager=new c.TokenManager(e.tokenRefresh)),this.middlewareChain=new u.MiddlewareChain,e.middleware&&e.middleware.forEach(e=>this.middlewareChain.use(e)),e.enableLogging&&this.middlewareChain.use((0,u.createLoggingMiddleware)(e.logger)),this.jobs=new n.JobsClient(this),this.reports=new i.ReportsClient(this),this.webhooks=new o.WebhooksClient(this),this.adapters=new a.AdaptersClient(this)}use(e){this.middlewareChain.use(e)}async request(e,t,r={}){let n=async()=>{let n={method:e,path:t,headers:{},body:r.body,...void 0!==r.query&&{query:r.query}};return(await this.middlewareChain.execute(n,async e=>this.executeRequest(e))).data};return this.deduplicateRequests&&"GET"===e?(0,d.withDeduplication)(e,t,r.body,()=>(0,l.withRetry)(n,this.retryConfig)):(0,l.withRetry)(n,this.retryConfig)}async executeRequest(e){let t;let r=new URL(`${this.baseUrl}${e.path}`);if(e.query&&Object.entries(e.query).forEach(([e,t])=>{r.searchParams.append(e,t)}),this.tokenManager){let e=await this.tokenManager.getToken();t=`Bearer ${e}`}else t=this.apiKey;let n={"Content-Type":"application/json",...this.tokenManager?{Authorization:t}:{"X-API-Key":t},...e.headers},i={method:e.method,headers:n};void 0!==e.body&&null!==e.body&&(i.body=JSON.stringify(e.body));let o=new AbortController,a=setTimeout(()=>o.abort(),this.timeout);try{let e;let t=await fetch(r.toString(),{...i,signal:o.signal});clearTimeout(a);let n={};t.headers.forEach((e,t)=>{n[t]=e});let l=t.headers.get("content-type");if(e=l?.includes("application/json")?await t.json():await t.text(),!t.ok)throw(0,s.parseError)(t,e);return{status:t.status,headers:n,data:e}}catch(e){if(clearTimeout(a),e instanceof s.SettlerError)throw e;if(e instanceof Error){if("AbortError"===e.name)throw new s.NetworkError(`Request timeout after ${this.timeout}ms`);throw new s.NetworkError(e.message,e)}throw new s.NetworkError("Request failed")}}}t.SettlerClient=p},6658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptersClient=void 0;let n=r(1439);class i{constructor(e){this.client=e}async list(e){let t={};return e?.cursor&&(t.cursor=e.cursor),e?.limit&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/adapters",{query:t})}async get(e){return this.client.request("GET",`/api/v1/adapters/${e}`)}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}}t.AdaptersClient=i},3315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobsClient=void 0;let n=r(1439);class i{constructor(e){this.client=e}async create(e){return this.client.request("POST","/api/v1/jobs",{body:e})}async list(e){let t={};return e?.cursor&&(t.cursor=e.cursor),e?.limit&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/jobs",{query:t})}async get(e){return this.client.request("GET",`/api/v1/jobs/${e}`)}async run(e){return this.client.request("POST",`/api/v1/jobs/${e}/run`)}async delete(e){await this.client.request("DELETE",`/api/v1/jobs/${e}`)}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}}t.JobsClient=i},7909:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReportsClient=void 0;let n=r(1439);class i{constructor(e){this.client=e}async get(e,t={}){let r={};return t.startDate&&(r.startDate=t.startDate),t.endDate&&(r.endDate=t.endDate),t.format&&(r.format=t.format),this.client.request("GET",`/api/v1/reports/${e}`,{query:r})}async list(e){let t={};return e?.cursor&&(t.cursor=e.cursor),e?.limit&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/reports",{query:t})}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}}t.ReportsClient=i},6800:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebhooksClient=void 0;let n=r(1439);class i{constructor(e){this.client=e}async create(e){return this.client.request("POST","/api/v1/webhooks",{body:e})}async list(e){let t={};return e?.cursor&&(t.cursor=e.cursor),e?.limit&&(t.limit=String(e.limit)),this.client.request("GET","/api/v1/webhooks",{query:t})}async get(e){return this.client.request("GET",`/api/v1/webhooks/${e}`)}async delete(e){await this.client.request("DELETE",`/api/v1/webhooks/${e}`)}listPaginated(e){return(0,n.createPaginatedIterator)(t=>this.list({...e,...t}))}}t.WebhooksClient=i},4027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownError=t.ServerError=t.RateLimitError=t.ValidationError=t.AuthError=t.NetworkError=t.SettlerError=void 0,t.parseError=function(e,t){let n=e.status,l="object"==typeof t&&null!==t?t:{},d=l.message||l.error||`HTTP ${n}: ${e.statusText}`;switch(n){case 400:return new o(d,void 0,n,l.details);case 401:case 403:return new i(d,n,l.details);case 429:{let t=e.headers.get("Retry-After"),r=e.headers.get("X-RateLimit-Limit"),n=e.headers.get("X-RateLimit-Remaining"),i=e.headers.get("X-RateLimit-Reset");return new a(d,t?parseInt(t,10):void 0,r?parseInt(r,10):void 0,n?parseInt(n,10):void 0,i?parseInt(i,10):void 0)}case 500:case 502:case 503:case 504:return new s(d,n,l.details);default:return new r(d,"API_ERROR",n,l.details)}};class r extends Error{constructor(e,t,r,n){super(e),this.name=this.constructor.name,this.code=t,void 0!==r&&(this.statusCode=r),void 0!==n&&(this.details=n),Error.captureStackTrace?.(this,this.constructor)}}t.SettlerError=r;class n extends r{constructor(e,t){super(e,"NETWORK_ERROR",void 0,{cause:t}),this.name="NetworkError"}}t.NetworkError=n;class i extends r{constructor(e,t,r){super(e,"AUTH_ERROR",t||401,r),this.name="AuthError"}}t.AuthError=i;class o extends r{constructor(e,t,r,n){super(e,"VALIDATION_ERROR",r||400,n),this.name="ValidationError",void 0!==t&&(this.field=t)}}t.ValidationError=o;class a extends r{constructor(e,t,r,n,i){super(e,"RATE_LIMIT_ERROR",429),this.name="RateLimitError",void 0!==t&&(this.retryAfter=t),void 0!==r&&(this.limit=r),void 0!==n&&(this.remaining=n),void 0!==i&&(this.reset=i)}}t.RateLimitError=a;class s extends r{constructor(e,t,r){super(e,"SERVER_ERROR",t||500,r),this.name="ServerError"}}t.ServerError=s;class l extends r{constructor(e,t){super(e,"UNKNOWN_ERROR",void 0,{cause:t}),this.name="UnknownError"}}t.UnknownError=l},2923:(e,t,r)=>{"use strict";var n=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptersClient=t.WebhooksClient=t.ReportsClient=t.JobsClient=t.SettlerClient=t.withRetry=t.createMetricsMiddleware=t.createLoggingMiddleware=t.MiddlewareChain=t.TokenManager=t.extractWebhookTimestamp=t.verifyWebhookSignatureWithTimestamp=t.verifyWebhookSignature=t.PaginatedIterator=t.collectPaginated=t.createPaginatedIterator=t.parseError=t.UnknownError=t.ServerError=t.RateLimitError=t.ValidationError=t.AuthError=t.NetworkError=t.SettlerError=void 0;let i=r(5337);Object.defineProperty(t,"SettlerClient",{enumerable:!0,get:function(){return i.SettlerClient}});let o=r(3315);Object.defineProperty(t,"JobsClient",{enumerable:!0,get:function(){return o.JobsClient}});let a=r(7909);Object.defineProperty(t,"ReportsClient",{enumerable:!0,get:function(){return a.ReportsClient}});let s=r(6800);Object.defineProperty(t,"WebhooksClient",{enumerable:!0,get:function(){return s.WebhooksClient}});let l=r(6658);Object.defineProperty(t,"AdaptersClient",{enumerable:!0,get:function(){return l.AdaptersClient}}),function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)}(r(2684),t);var d=r(4027);Object.defineProperty(t,"SettlerError",{enumerable:!0,get:function(){return d.SettlerError}}),Object.defineProperty(t,"NetworkError",{enumerable:!0,get:function(){return d.NetworkError}}),Object.defineProperty(t,"AuthError",{enumerable:!0,get:function(){return d.AuthError}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.ValidationError}}),Object.defineProperty(t,"RateLimitError",{enumerable:!0,get:function(){return d.RateLimitError}}),Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return d.ServerError}}),Object.defineProperty(t,"UnknownError",{enumerable:!0,get:function(){return d.UnknownError}}),Object.defineProperty(t,"parseError",{enumerable:!0,get:function(){return d.parseError}});var c=r(1439);Object.defineProperty(t,"createPaginatedIterator",{enumerable:!0,get:function(){return c.createPaginatedIterator}}),Object.defineProperty(t,"collectPaginated",{enumerable:!0,get:function(){return c.collectPaginated}}),Object.defineProperty(t,"PaginatedIterator",{enumerable:!0,get:function(){return c.PaginatedIterator}});var u=r(6620);Object.defineProperty(t,"verifyWebhookSignature",{enumerable:!0,get:function(){return u.verifyWebhookSignature}}),Object.defineProperty(t,"verifyWebhookSignatureWithTimestamp",{enumerable:!0,get:function(){return u.verifyWebhookSignatureWithTimestamp}}),Object.defineProperty(t,"extractWebhookTimestamp",{enumerable:!0,get:function(){return u.extractWebhookTimestamp}});var p=r(1833);Object.defineProperty(t,"TokenManager",{enumerable:!0,get:function(){return p.TokenManager}});var h=r(5386);Object.defineProperty(t,"MiddlewareChain",{enumerable:!0,get:function(){return h.MiddlewareChain}}),Object.defineProperty(t,"createLoggingMiddleware",{enumerable:!0,get:function(){return h.createLoggingMiddleware}}),Object.defineProperty(t,"createMetricsMiddleware",{enumerable:!0,get:function(){return h.createMetricsMiddleware}});var m=r(8284);Object.defineProperty(t,"withRetry",{enumerable:!0,get:function(){return m.withRetry}}),t.default=i.SettlerClient},2684:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDeduplication=n,t.clearPendingRequests=function(){r.clear()};let r=new Map;async function n(e,t,n,i){!function(){let e=Date.now();for(let[t,n]of r.entries())e-n.timestamp>6e4&&r.delete(t)}();let o=function(e,t,r){let n=r?JSON.stringify(r):"";return`${e}:${t}:${n}`}(e,t,n),a=r.get(o);if(a)return a.promise;let s=i().finally(()=>{r.delete(o)});return r.set(o,{promise:s,timestamp:Date.now()}),s}},5386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MiddlewareChain=void 0,t.createLoggingMiddleware=function(e){let t=e?.info||console.log,r=e?.error||console.error;return async(e,n)=>{let i=Date.now();t(`[Settler SDK] ${e.method} ${e.path}`,{method:e.method,path:e.path,headers:e.headers});try{let r=await n(),o=Date.now()-i;return t(`[Settler SDK] ${e.method} ${e.path} ${r.status} (${o}ms)`,{method:e.method,path:e.path,status:r.status,duration:o}),r}catch(n){let t=Date.now()-i;throw r(`[Settler SDK] ${e.method} ${e.path} ERROR (${t}ms)`,{method:e.method,path:e.path,error:n,duration:t}),n}}},t.createMetricsMiddleware=function(e){return async(t,r)=>{let n=Date.now();e?.increment?.("settler.request.started",{method:t.method,path:t.path});try{let i=await r(),o=Date.now()-n;return e?.histogram?.("settler.request.duration",o,{method:t.method,path:t.path,status:String(i.status)}),e?.increment?.("settler.request.completed",{method:t.method,path:t.path,status:String(i.status)}),i}catch(i){let r=Date.now()-n;throw e?.histogram?.("settler.request.duration",r,{method:t.method,path:t.path,status:"error"}),e?.increment?.("settler.request.failed",{method:t.method,path:t.path}),i}}};class r{use(e){this.middlewares.push(e)}async execute(e,t){let r=0,n=async()=>{if(r>=this.middlewares.length)return t(e);let i=this.middlewares[r++];return i?i(e,n):t(e)};return n()}constructor(){this.middlewares=[]}}t.MiddlewareChain=r},1439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaginatedIterator=void 0,t.createPaginatedIterator=function(e){return new r(e)},t.collectPaginated=n;class r{constructor(e){this.currentPage=[],this.currentIndex=0,this.hasMore=!0,this.fetchPage=e}async next(){if(this.currentIndex<this.currentPage.length){let e=this.currentPage[this.currentIndex++];if(void 0!==e)return{done:!1,value:e}}if(!this.hasMore)return{done:!0,value:void 0};try{let e={};void 0!==this.currentCursor&&(e.cursor=this.currentCursor);let t=await this.fetchPage(e);if(this.currentPage=t.data,this.currentIndex=0,void 0!==t.nextCursor&&(this.currentCursor=t.nextCursor),this.hasMore=t.hasMore??void 0!==t.nextCursor,0===this.currentPage.length)return{done:!0,value:void 0};let r=this.currentPage[this.currentIndex++];if(void 0!==r)return{done:!1,value:r};return{done:!0,value:void 0}}catch(e){throw e}}[Symbol.asyncIterator](){return this}}async function n(e){let t=[];for await(let r of e)t.push(r);return t}t.PaginatedIterator=r},8284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withRetry=o;let n=r(4027),i={maxRetries:3,initialDelay:1e3,maxDelay:3e4,multiplier:2,retryOnRateLimit:!0,shouldRetry:()=>!0};async function o(e,t={}){let r;let o={...i,...t};for(let t=0;t<=o.maxRetries;t++)try{return await e()}catch(a){let e;if(r=a instanceof n.SettlerError?a:new n.NetworkError(String(a),a),t===o.maxRetries)break;let i=r instanceof n.NetworkError||r instanceof n.RateLimitError&&o.retryOnRateLimit||void 0!==r.statusCode&&r.statusCode>=500;if(!(o.shouldRetry(r,t)&&i))break;e=r instanceof n.RateLimitError&&r.retryAfter?1e3*r.retryAfter:function(e,t,r,n){let i=t*Math.pow(n,e);return Math.min(i+.1*Math.random()*i,r)}(t,o.initialDelay,o.maxDelay,o.multiplier),await function(e){return new Promise(t=>setTimeout(t,e))}(e)}throw r}},1833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenManager=void 0;class r{constructor(e){this.tokenInfo=null,this.refreshPromise=null,this.config={refreshThreshold:e.refreshThreshold??3e5,refreshFn:e.refreshFn}}async getToken(){let e=Date.now();if(!this.tokenInfo||this.tokenInfo.expiresAt-e<this.config.refreshThreshold){if(this.refreshPromise)return this.tokenInfo=await this.refreshPromise,this.refreshPromise=null,this.tokenInfo.token;this.refreshPromise=this.config.refreshFn();try{return this.tokenInfo=await this.refreshPromise,this.refreshPromise=null,this.tokenInfo.token}catch(e){throw this.refreshPromise=null,e}}if(!this.tokenInfo)throw Error("Token is not available");return this.tokenInfo.token}setToken(e){this.tokenInfo=e}clearToken(){this.tokenInfo=null,this.refreshPromise=null}}t.TokenManager=r},6620:(e,t,r)=>{"use strict";function n(e,t,n){if(!t||!n)return!1;let i=t.split(",").find(e=>e.startsWith("v1="));if(!i)return!1;let o=i.substring(3);try{let t;let i=function(){try{return r(4770)}catch{}throw Error("Webhook signature verification requires Node.js crypto module or a crypto library")}(),a=i.createHmac("sha256",n);"string"==typeof e?t=e:Buffer.isBuffer(e)?t=e.toString():t=e instanceof ArrayBuffer?Buffer.from(e).toString():String(e),a.update(t);let s=a.digest("hex");if(i.timingSafeEqual)return i.timingSafeEqual(Buffer.from(o,"hex"),Buffer.from(s,"hex"));if(o.length!==s.length)return!1;let l=0;for(let e=0;e<o.length;e++)l|=o.charCodeAt(e)^s.charCodeAt(e);return 0===l}catch(e){return!1}}function i(e){let t=e.split(",").find(e=>e.startsWith("t="));if(!t)return null;let r=parseInt(t.substring(2),10);return isNaN(r)?null:1e3*r}Object.defineProperty(t,"__esModule",{value:!0}),t.verifyWebhookSignature=n,t.extractWebhookTimestamp=i,t.verifyWebhookSignatureWithTimestamp=function(e,t,r,o=3e5){if(!n(e,t,r))return!1;let a=i(t);if(!a)return!1;let s=Date.now()-a;return s>=0&&s<=o}},5162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,dynamic:()=>s});var n=r(3227),i=r(3677),o=r(3095),a=r(2923);let s="force-dynamic";function l(){let[e]=(0,i.useState)(()=>""),[t]=(0,i.useState)(()=>e?new a.SettlerClient({apiKey:e}):null),[r,s]=(0,i.useState)([]),[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[p,h]=(0,i.useState)("");return((0,i.useCallback)(async()=>{if(t&&e)try{u(!0);let e=((await t.jobs.list({limit:10})).data||[]).map((e,t)=>({id:`tx-${e.id}`,provider:e.source?.adapter||"stripe",providerTransactionId:`ch_${e.id.slice(0,10)}`,amount:{value:100*(t+1),currency:"USD"},currency:"USD",date:e.createdAt||new Date().toISOString(),status:"succeeded",referenceId:e.name})),r=[{id:"exc-1",category:"amount_mismatch",severity:"high",description:"Transaction amount does not match settlement",resolutionStatus:"open",createdAt:new Date().toISOString()}];s(e),d(r);let i=n.jsx(o.yg,{children:(0,n.jsxs)(o.m_,{id:"demo-rules",name:"Demo Rules",priority:"exact-first",children:[n.jsx(o.A1,{id:"rule-1",name:"Exact Amount Match",field:"amount",type:"exact",priority:1}),n.jsx(o.A1,{id:"rule-2",name:"Date Range Match",field:"date",type:"range",tolerance:{days:7},priority:2})]})}),a=(0,o.Bo)(i,{name:"Settler Dashboard Demo",description:"Demo reconciliation workflow",pretty:!0});h(a)}catch(e){console.error("Failed to load data:",e)}finally{u(!1)}},[t,e]),e)?c?n.jsx("div",{className:"container mx-auto p-6",children:n.jsx("div",{className:"text-center py-12",children:n.jsx("div",{className:"text-lg",children:"Loading reconciliation data..."})})}):(0,n.jsxs)("div",{className:"container mx-auto p-6",children:[(0,n.jsxs)("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"React.Settler Demo"}),n.jsx("p",{className:"text-gray-600",children:"This page demonstrates the @settler/react-settler component library integrated into the Settler dashboard."})]}),(0,n.jsxs)(o.yg,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsx(o.i9,{title:"Total Transactions",value:r.length,subtitle:"Reconciliation transactions"}),n.jsx(o.i9,{title:"Match Rate",value:"95%",subtitle:"19 of 20 matched",trend:"up"}),n.jsx(o.i9,{title:"Exceptions",value:l.length,subtitle:"Requiring review",trend:"neutral"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Transactions"})}),n.jsx("div",{className:"p-6",children:n.jsx(o.yh,{transactions:r,onSelect:e=>{console.log("Selected transaction:",e),alert(`Selected transaction: ${e.id}`)}})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsx("h2",{className:"text-xl font-semibold",children:"Exceptions"})}),n.jsx("div",{className:"p-6",children:n.jsx(o.Xc,{exceptions:l,onResolve:e=>{console.log("Resolving exception:",e),alert(`Resolving exception: ${e.id}`)}})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,n.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Compiled Configuration"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"JSON config extracted from React component tree"})]}),n.jsx("div",{className:"p-6",children:n.jsx("pre",{className:"bg-gray-50 p-4 rounded overflow-auto text-sm",children:p})})]})]})]}):n.jsx("div",{className:"container mx-auto p-6",children:n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,n.jsxs)("p",{className:"text-yellow-800",children:["Please provide an API key via the ",n.jsx("code",{children:"?apiKey=..."})," query parameter."]})})})}},7718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var n=r(9013);r(5556);let i={title:"Settler - Reconciliation as a Service",description:"Automate financial and event data reconciliation across fragmented SaaS and e-commerce ecosystems"};function o({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{children:e})})}},6050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,dynamic:()=>i});var n=r(3189);let i=(0,n.createProxy)(String.raw`/workspace/packages/web/src/app/react-settler-demo/page.tsx#dynamic`),o=(0,n.createProxy)(String.raw`/workspace/packages/web/src/app/react-settler-demo/page.tsx#default`)},5556:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[592],()=>r(1360));module.exports=n})();