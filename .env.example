# Settler API Environment Variables
# Copy this file to .env and fill in your values

# Node Environment
NODE_ENV=development
DEPLOYMENT_ENV=local

# Server Configuration
PORT=3000
HOST=0.0.0.0

# Supabase Configuration (PostgreSQL + Realtime + pgvector)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Database Configuration (Fallback - use Supabase URL above)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=settler
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL=false
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=2000
DB_STATEMENT_TIMEOUT=30000

# Upstash Redis Configuration (Serverless Redis)
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-redis-token

# Fallback Redis Configuration (for local development)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TLS=false
REDIS_DB=0

# Redis Cache Configuration
REDIS_CACHE_TTL=3600
REDIS_RECONCILIATION_TTL=300

# JWT Configuration
JWT_SECRET=dev-secret-change-in-production-min-32-chars
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# Encryption Configuration (32 characters required)
ENCRYPTION_KEY=dev-encryption-key-32-chars-long!!

# Rate Limiting
RATE_LIMIT_DEFAULT=1000
RATE_LIMIT_WINDOW_MS=900000

# Webhook Configuration
WEBHOOK_MAX_RETRIES=5
WEBHOOK_INITIAL_DELAY=2000
WEBHOOK_MAX_DELAY=32000

# Data Retention
DATA_RETENTION_DAYS=365

# CORS Configuration (comma-separated)
ALLOWED_ORIGINS=*

# Logging Configuration
LOG_LEVEL=info
LOG_SAMPLING_RATE=1.0

# Observability Configuration
SERVICE_NAME=settler-api

# Sentry Configuration (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=0.1

# Feature Flags
ENABLE_SCHEMA_PER_TENANT=false
ENABLE_REQUEST_TIMEOUT=true
ENABLE_API_DOCS=true

# Security Configuration
TRUST_PROXY=false
SECURE_COOKIES=false

# Monitoring Configuration
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true

# Supabase Realtime Configuration
SUPABASE_REALTIME_EVENTS_PER_SECOND=10
